function GithubAPI(a){function c(){return q.getRef('heads/'+w.name).then(function(z){w.commitSHA=z.data.object.sha})}function g(){return q.getCommit(w.commitSHA).then(function(z){w.treeSHA=z.data.tree.sha})}function j(z){for(promises=[],length=z.length,i=0;i<length;i++)promises.push(k(z[i]));return Promise.all(promises)}function k(z){return q.createBlob(z.content).then(function(A){v.push({sha:A.data.sha,path:z.path,mode:'100644',type:'blob'})})}function l(){return q.createTree(v,w.treeSHA).then(function(z){x.treeSHA=z.data.sha})}function o(z){return q.commit(w.commitSHA,x.treeSHA,z).then(function(A){x.sha=A.data.sha})}function p(){return q.updateHead('heads/'+w.name,x.sha)}var q,v=[],w={},x={},y=new GitHub(a);this.setRepo=function(z,A){q=y.getRepo(z,A)},this.setBranch=function(z){if(!q)throw'Repository is not initialized';return q.listBranches().then(function(A){return branchExists=A.data.find(function(B){return B.name===z}),branchExists?void(w.name=z):q.createBranch('master',z).then(function(){w.name=z})})},this.pushFiles=function(z,A){if(!q)throw'Repository is not initialized';if(!w.hasOwnProperty('name'))throw'Branch is not set';return c().then(g).then(function(){return j(A)}).then(l).then(function(){return o(z)}).then(p).catch(function(B){console.error(B)})}}var up_git=function(a,c,g,j,k,l,o){function p(q){return 10>q&&(q='0'+q),q}7!=up_git.length||(d=new Date,h=p(d.getHours()),m=p(d.getMinutes()),s=p(d.getSeconds()),post_commit=a+' am: '+d.getDate()+'. '+adjustments_de.monthNamesMin[d.getMonth()]+' '+d.getFullYear()+' um: '+h+':'+m+':'+s,api=new GithubAPI({token:l}),api.setRepo(g,j),api.setBranch(k).then(function(){return api.pushFiles(post_commit,[{content:c,encoding:'utf-8',path:o}])}).then(function(){document.getElementById('process_overlay').classList.remove('process_overlay_dark'),document.body.style.background='#fff',document.getElementById('Images_display').style.background='#ccc',console.log('Files committed!')}))};