function GithubAPI(a){function g(){return w.getRef('heads/'+y.name).then(function(B){y.commitSHA=B.data.object.sha})}function j(){return w.getCommit(y.commitSHA).then(function(B){y.treeSHA=B.data.tree.sha})}function k(B){for(promises=[],length=B.length,i=0;i<length;i++)promises.push(o(B[i]));return Promise.all(promises)}function o(B){return w.createBlob(B.content).then(function(C){x.push({sha:C.data.sha,path:B.path,mode:'100644',type:'blob'})})}function p(){return w.createTree(x,y.treeSHA).then(function(B){z.treeSHA=B.data.sha})}function q(B){return w.commit(y.commitSHA,z.treeSHA,B).then(function(C){z.sha=C.data.sha})}function v(){return w.updateHead('heads/'+y.name,z.sha)}var w,x=[],y={},z={},A=new GitHub(a);this.setRepo=function(B,C){w=A.getRepo(B,C)},this.setBranch=function(B){if(!w)throw'Repository is not initialized';return w.listBranches().then(function(C){return branchExists=C.data.find(function(D){return D.name===B}),branchExists?void(y.name=B):w.createBranch('master',B).then(function(){y.name=B})})},this.pushFiles=function(B,C){if(!w)throw'Repository is not initialized';if(!y.hasOwnProperty('name'))throw'Branch is not set';return g().then(j).then(function(){return k(C)}).then(p).then(function(){return q(B)}).then(v).catch(function(D){console.error(D)})}}var up_git=function(a,g,j,k,o,p,q,v,w){function x(y){return 10>y&&(y='0'+y),y}8>up_git.length||9<up_git.length||(d=new Date,h=x(d.getHours()),m=x(d.getMinutes()),s=x(d.getSeconds()),post_commit=a+' / '+g+' / '+d.getDate()+'. '+adjustments_de.monthNamesMin[d.getMonth()]+' '+d.getFullYear()+' / '+h+':'+m+':'+s,api=new GithubAPI({token:q}),api.setRepo(k,o),api.setBranch(p).then(function(){return api.pushFiles(post_commit,[{content:j,encoding:'utf-8',path:v}])}).then(function(){console.log('Files committed!'),'undefined'==typeof w?(document.getElementById('process_overlay').classList.remove('process_overlay_dark'),document.body.style.background='#fff',document.getElementById('Images_display').style.background='#ccc'):window.location.href=w}))};