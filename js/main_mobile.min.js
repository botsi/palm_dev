var sivId,fadeinmovId,foimId,speedId,isScrolling,wlh,folders,hg,disable_cine=!0,jump_destination=!1,google_pad_map_url="comgooglemaps://?q=Dammweg+41,+3013+Bern",google_map_link="https://www.google.ch/maps/place/Dammweg+41,+3013+Bern/@46.9586655,7.4438403,17z/data=!3m1!4b1!4m5!3m4!1s0x478e39ecbecd9651:0x3ae88eac744bae78!8m2!3d46.9586655!4d7.446029",align_onresize=function(){var e=document.getElementById("chapter_menu");e&&"block"==e.style.display&&(e.style.display="none"),clearTimeout(resizeId),resizeId=setTimeout(function(){for(var e=document.getElementsByClassName("tx"),t=0;t<e.length;t++)e[t].style.WebkitColumnCount=e[t].style.MozColumnCount=e[t].style.columnCount=get_column_count(folders[chapter].data[t]).replace("column-count:","");jump_to(folders[chapter].last_position,chapter)},200)},get_column_count=function(){return"column-count:1"},inhalt=function(e,t){var a="";a+='<span class="scroll_positioner"></span><span class="ueandtx"><span class="ue">'+e[t].name,a+=e[t].time?'<span class="mo_ye"><br/>'+adjustments_de.monthNames[e[t].time.from[1]-1]+" "+e[t].time.from[2]+"</span>":"",a+=e[t].published?'<span class="mo_ye"><br/>'+e[t].published.year+"</span>":"",a+=e[t].time||e[t].published?"":'<span class="mo_ye"><br/>&nbsp;</span>';var s=get_column_count(),o='<i class="fa fa-download" aria-hidden="true"></i><i class="fa fa-pause" aria-hidden="true"></i><i class="fa fa-play" aria-hidden="true"></i><i class="fa fa-volume-off" aria-hidden="true"></i><i class="fa fa-volume-up" aria-hidden="true"></i><i class="fa fa-expand" aria-hidden="true"></i><i class="fa eye_txt fa-eye" aria-hidden="true"></i>',n=o;a+='<span class="sh">'+n+'</span></span><span class="tx tx_out" style="-webkit-'+s+";-moz-"+s+";"+s+';">';var i=["",""];"undefined"!=typeof e[t].epilog.App&&(i=["<div></div>",'<div class="palma_app"></div>']),"undefined"!=typeof e[t].map&&(i=["<div></div>",'<div id="palma_map"></div>']),"undefined"!=typeof e[t].form&&(i=['<div id="palma_form"></div>',"<div></div>"]);var l=2==i.length?["",""]:[i[2],i[3]];return a+=""==e[t].prolog?i[0]:i[0]+"<h2"+l[0]+">"+e[t].prolog+"</h2>"+l[1],a+=e[t].text+i[1]+"</span>",a+="</span>"},change_image=function(e){1==hist_push&&history.state!=e.slice(0,e.indexOf("_"))&&("scrollRestoration"in history&&(history.scrollRestoration="manual"),history.pushState(e.slice(0,e.indexOf("_")),"","")),hist_push=!0,e=e.replace("_0","").replace("_undefined","");var t=new Image;t.onerror=function(){change_image("default")},t.onload=function(){fade_img("hg_cover",'url("'+img_type.path+folders[chapter].name+"/"+e+img_type.ext+'")')},t.src=img_type.path+folders[chapter].name+"/"+e+img_type.ext},see=function(e){var t=e.ix,a=e.classList.contains("fa-eye")?1:0;folders[chapter].data[t].see_read_state=a,1==a?(e.classList.remove("fa-eye"),e.classList.add("fa-file-text-o"),e.parentNode.parentNode.nextSibling.style.visibility="hidden",disable_cine=!1):(e.classList.remove("fa-file-text-o"),e.classList.add("fa-eye"),e.parentNode.parentNode.nextSibling.style.visibility="visible",disable_cine=!0)},toggle_favicons=function(){for(var e=document.getElementsByClassName("fa-download"),t=document.getElementsByClassName("eye_txt"),a=0;a<t.length;a++)e[a].ix=t[a].ix=a,0==chapter?e[a].style.visibility="hidden":(e[a].style.visibility="visible",e[a].ontouchstart=function(e){blink_up(this),select_pdf.get_scr(this.ix)}),t[a].ontouchstart=function(e){blink_up(this),0==folders[chapter].first_human_slide&&cc.classList.add("escape_scroll"),console.log("added"),console.log("see"),see(this)}},slide_lr=function(e,t){if("bestellen"!=folders[chapter].data[folders[chapter].last_position].comp_name){if(0==folders[chapter].first_human_slide&&cc.classList.add("escape_scroll"),0==folders[chapter].data[folders[chapter].last_position].see_read_state){var a=document.getElementsByClassName("eye_txt")[folders[chapter].last_position];a.ix=folders[chapter].last_position,see(a)}if(e==-1)folders[chapter].data[folders[chapter].last_position].slid_count--,folders[chapter].data[folders[chapter].last_position].slid_count<0&&(folders[chapter].data[folders[chapter].last_position].slid_count=bilder()[folders[chapter].last_position].length);else{if(e>1||t)return folders[chapter].data[folders[chapter].last_position].slid_count=e,void change_image(folders[chapter].data[folders[chapter].last_position].comp_name+"_"+e);folders[chapter].data[folders[chapter].last_position].slid_count++,folders[chapter].data[folders[chapter].last_position].slid_count>bilder()[folders[chapter].last_position].length&&(folders[chapter].data[folders[chapter].last_position].slid_count=0)}change_image(folders[chapter].data[folders[chapter].last_position].comp_name+"_"+folders[chapter].data[folders[chapter].last_position].slid_count)}},get_page_scroll_position=function(e){return 0-e.getBoundingClientRect().top},i_scrolled=!1,white_head=function(){console.log("iscr"),i_scrolled=!0,setTimeout(function(){i_scrolled=!1},200);for(var e=document.getElementsByClassName("ueandtx"),t=get_page_scroll_position(e[0]),a=[],s=0;s<e.length;s++){var o=parseInt(e[s].offsetTop+210+e[s].offsetHeight/2);switch(!0){case o<t+210:a.push(e[s].offsetTop+e[s].offsetHeight);break;case o>t+210+window.innerHeight:a.push(e[s].offsetTop+parseInt((window.innerHeight-210)/2));break;default:a.push(o)}}var n=getNearestNumber(a,t+window.innerHeight/2+240);folders[chapter].last_position==n&&chapter==old_chapter||(cc.classList.contains("escape_scroll")&&cc.classList.remove("escape_scroll"),old_chapter=chapter,folders[chapter].last_position=n,cc.style.height="auto","undefined"!=typeof folders[chapter].data[n].epilog.App&&(app_display_data.act_app=folders[chapter].data[n].comp_name,document.getElementsByClassName("palma_app")[n].innerHTML=app_display_data[folders[chapter].data[n].comp_name].apendix()),disable_cine=0==folders[chapter].data[folders[chapter].last_position].bilder.length,change_image(folders[chapter].data[folders[chapter].last_position].comp_name+"_"+folders[chapter].data[folders[chapter].last_position].slid_count),"undefined"!=typeof folders[chapter].data[n].map&&(document.getElementById("palma_map").innerHTML='<img src="images/gog.png" />',document.getElementById("palma_map").addEventListener("click",function(){window.location=window.navigator.userAgent.indexOf("iPad")!=-1||window.navigator.userAgent.indexOf("iPhone")!=-1?google_pad_map_url:google_map_link})))},preset_new_bg=function(e){if(!hg.set){hg.set=!0;var t=folders[chapter].data[folders[chapter].last_position].slid_count+e/Math.abs(e);t=t>bilder()[folders[chapter].last_position].length||0==t?"":t<0?"_"+bilder()[folders[chapter].last_position].length:"_"+t,hg.style.backgroundImage='url("'+img_type.path+folders[chapter].name+"/"+folders[chapter].data[folders[chapter].last_position].comp_name+t+img_type.ext+'")'}},fade_img=function(e,t){var e=document.getElementById(e);e.classList.add("change_img_in"),e.style.backgroundImage=t,setTimeout(function(){hg.style.backgroundImage=t,e.classList.remove("change_img_in")},400),hg.set=!1},jump_to=function(e,t){return jump_destination=!1,found.style.display="none",folders[t].last_position=e,t==chapter?void hit_menue(t,-1):void hit_menue(t)},stack="",hit_menue=function(e,t){found.classList.remove("found_in_out"),found.style.display="none";var a=(folders[chapter].last_position,document.getElementsByClassName("items"));isNaN(e)||(e=document.getElementsByClassName("items")[e]);for(var s=0;s<a.length;s++)if(a[s].style.color="#333",a[s]==e&&(disable_cine=!0,old_chapter="undefined"==typeof t?chapter:t,chapter=s,a[chapter].style.color="#bc123a","undefined"==typeof t)){for(var o="",n=0;n<folders[chapter].data.length;n++)o+=inhalt(folders[chapter].data,n);cc.innerHTML=o}for(var s=0;s<folders[chapter].data.length;s++)"undefined"==typeof folders[chapter].data[s].slid_count&&(folders[chapter].data[s].slid_count=0),"undefined"==typeof folders[chapter].data[s].see_read_state&&(folders[chapter].data[s].see_read_state=0);if("undefined"==typeof folders[chapter].data[0].bilder){folders[chapter].first_human_slide=!1;for(var s=0;s<folders[chapter].data.length;s++)folders[chapter].data[s].bilder=[];return stack=folders[chapter].last_position,console.log("stack: ",stack),clearInterval(foimId),foimId=setInterval(function(){1==preload_images.folder_imgs&&(clearInterval(foimId),preload_images.folder_imgs=!1,document.getElementById("hg_cover").style.display="block",document.getElementsByClassName("scroll_positioner")[folders[chapter].last_position].scrollIntoView({block:"start",behavior:"smooth"}),0==i_scrolled&&(white_head(),jump_to(stack,chapter),stack=""),console.log("fav ?"),toggle_favicons())},50),void preload_images.get_arrays("sub",folders[chapter],"name")}document.getElementById("hg_cover").style.display="block",document.getElementsByClassName("scroll_positioner")[folders[chapter].last_position].scrollIntoView({block:"start",behavior:"smooth"}),0==i_scrolled&&(white_head(),jump_to(stack,chapter),stack=""),console.log("fav ?"),toggle_favicons()},blink_up=function(e){e.classList.add("blink_but"),setTimeout(function(){e.classList.remove("blink_but")},500)},search=function(e){jump_destination=!1,e.style.color="#fff",e.previousSibling.style.display=e.nextSibling.style.display="none";var t=e.value.toLowerCase().replace(/ /g,"");e:for(var a=0;a<folders.length;a++)for(var s=0;s<folders[a].data.length;s++)for(key in folders[a].data[s])if(folders[a].data[s].search.indexOf(t)!=-1){e.style.color="#bc123a",e.previousSibling.style.display=e.nextSibling.style.display="inline-block",e.nextSibling.style.display="inline-block",e.nextSibling.ix=s,e.nextSibling.fx=a,e.nextSibling.onclick=function(){jump_to(this.ix,this.fx)},jump_destination=[s,a];break e}},arrow=function(e){e||(e=window.event),jump_destination&&13==e.keyCode&&(found.children[0].children[1].blur(),jump_to(jump_destination[0],jump_destination[1]),found.style.display="none")},start_cine=function(){var e=document.getElementById("hg_cover");cc.addEventListener("touchstart",function(){0==disable_cine&&get_mouse_coords(e,this)},!1),cc.addEventListener("touchmove",function(){0==disable_cine&&check_swipe(e)},!1),cc.addEventListener("touchend",function(){0==disable_cine&&swap_now(e)},!1)},get_cine_script=function(){var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("charset","utf-8"),e.onload=function(){start_cine(),preload_images.get_arrays("kind",folders,"name")},e.src="js/cinema.min.js",document.getElementsByTagName("head")[0].appendChild(e)},page_load=function(){wlh=window.location.href,display_prel=document.getElementById("preloaded"),found=document.getElementById("found"),cc=document.getElementById("chapter_content"),hg=document.getElementById("hg"),hg.set=!1,document.body.removeChild(document.getElementsByClassName("fa-angle-left")[0]),document.body.removeChild(document.getElementsByClassName("fa-angle-right")[0]),document.body.removeChild(document.getElementById("hg_audio"));for(var e=0;e<folders.length;e++){for(var t=0;t<folders[e].data.length;t++)folders[e].data[t].search.push(folders[e].data[t].comp_name),folders[e].data[t].name.toLowerCase().replace(/ /g,"")!=folders[e].data[t].comp_name&&folders[e].data[t].search.push(folders[e].data[t].name.toLowerCase().replace(/ /g,""));"undefined"!=typeof folders[e].data[0].time&&folders[e].data.sort(function(e,t){return t.time.from[2]-e.time.from[2]});var a=document.createElement("div");a.className="items",a.ix=e,a.innerHTML=folders[e].menu_name,a.addEventListener("click",function(){hit_menue(this)},!1),document.getElementById("content").appendChild(a),folders[e].last_position=0}var t=document.createElement("div");t.className="item_search",t.innerHTML='<i class="fa fa-search" aria-hidden="true"></i>',t.addEventListener("touchstart",function(){found.children[0].children[1].value="","block"==found.style.display?(found.style.display="none",found.children[0].children[1].blur()):(found.style.display="block",found.children[0].children[1].focus()),blink_up(this.children[0])},!1),document.getElementById("content").insertBefore(t,document.getElementById("content").children[3]),found.innerHTML='<p><i class="fa fa-check search_check" aria-hidden="true"></i><input type="text" onkeyup="search(this)" placeholder=" ... suchen" /><i class="fa fa-arrow-circle-right" aria-hidden="true" ontouchstart="blink_up(this)"></i></p>',cc.addEventListener("scroll",white_head,!1),window.addEventListener("keydown",arrow,!1),window.addEventListener("popstate",function(e){botsi_history(e)}),get_cine_script()};