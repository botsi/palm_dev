var sivId,fadeinmovId,foimId,speedId,wlh,folders,hg,disable_cine=!0,jump_destination=!1,google_pad_map_url="comgooglemaps://?q=Dammweg+41,+3013+Bern",google_map_link="https://www.google.ch/maps/place/Dammweg+41,+3013+Bern/@46.9586655,7.4438403,17z/data=!3m1!4b1!4m5!3m4!1s0x478e39ecbecd9651:0x3ae88eac744bae78!8m2!3d46.9586655!4d7.446029",align_onresize=function(){var e=document.getElementById("chapter_menu");e&&"block"==e.style.display&&(e.style.display="none"),clearTimeout(resizeId),resizeId=setTimeout(function(){for(var e=document.getElementsByClassName("tx"),t=0;t<e.length;t++)e[t].style.WebkitColumnCount=e[t].style.MozColumnCount=e[t].style.columnCount=get_column_count(folders[chapter].data[t]).replace("column-count:","");jump_to(folders[chapter].last_position,chapter)},200)},get_column_count=function(){return"column-count:1"},inhalt=function(e,t){var a="";a+='<span class="scroll_positioner"></span><span class="ueandtx"><span class="ue">'+e[t].name,a+=e[t].time?'<span class="mo_ye"><br/>'+adjustments_de.monthNames[e[t].time.from[1]-1]+" "+e[t].time.from[2]+"</span>":"",a+=e[t].published?'<span class="mo_ye"><br/>'+e[t].published.year+"</span>":"",a+=e[t].time||e[t].published?"":'<span class="mo_ye"><br/>&nbsp;</span>';var n=get_column_count(),o='<i class="fa fa-download" aria-hidden="true"></i><i class="fa fa-pause" aria-hidden="true"></i><i class="fa fa-play" aria-hidden="true"></i><i class="fa fa-volume-off" aria-hidden="true"></i><i class="fa fa-volume-up" aria-hidden="true"></i><i class="fa fa-expand" aria-hidden="true"></i><i class="fa fa-eye" aria-hidden="true"></i><i class="fa fa-file-text-o" aria-hidden="true"></i>',s=o;a+='<span class="sh">'+s+'</span></span><span class="tx tx_out" style="-webkit-'+n+";-moz-"+n+";"+n+';">';var i=["",""];"undefined"!=typeof e[t].epilog.App&&(i=["<div></div>",'<div class="palma_app"></div>']),"undefined"!=typeof e[t].map&&(i=["<div></div>",'<div id="palma_map"></div>']),"undefined"!=typeof e[t].form&&(i=['<div id="palma_form"></div>',"<div></div>"]);var l=2==i.length?["",""]:[i[2],i[3]];return a+=""==e[t].prolog?i[0]:i[0]+"<h2"+l[0]+">"+e[t].prolog+"</h2>"+l[1],a+=e[t].text+i[1]+"</span>",a+="</span>"},change_image=function(e){e=e.replace("_0","");var t=new Image;t.onerror=function(){change_image("default")},t.onload=function(){fade_img("hg_cover",'url("'+img_type.path+folders[chapter].name+"/"+e+img_type.ext+'")')},t.src=img_type.path+folders[chapter].name+"/"+e+img_type.ext},see=function(e,t,a){var n=e.ix;folders[chapter].data[n].see_read_state=t,1==t?(disable_cine=!1,e.style.display="none",e.nextSibling.style.display="inline-block",e.parentNode.parentNode.nextSibling.style.visibility="hidden"):(disable_cine=!0,e.style.display="none",e.previousSibling.style.display="inline-block",e.parentNode.parentNode.nextSibling.style.visibility="visible")},toggle_favicons=function(){for(var e=document.getElementsByClassName("fa-download"),t=document.getElementsByClassName("fa-eye"),a=document.getElementsByClassName("fa-file-text-o"),n=0;n<t.length;n++)e[n].ix=t[n].ix=a[n].ix=n,0==chapter?e[n].style.visibility="hidden":(e[n].style.visibility="visible",e[n].addEventListener("touchend",function(){confirm('Möchten Sie das PDF Dossier über "'+folders[chapter].data[this.ix].name+'"\nherunterladen und speichern?')&&select_pdf.get_scr(this.ix)},!1)),t[n].addEventListener("touchend",function(){see(this,1,-210)},!1),1==folders[chapter].data[n].see_read_state&&see(t[n],1,-26),a[n].addEventListener("touchend",function(){see(this,0)},!1)},slide_lr=function(e,t){if("bestellen"!=folders[chapter].data[folders[chapter].last_position].comp_name){if(0==folders[chapter].data[folders[chapter].last_position].see_read_state){var a=document.getElementsByClassName("fa-eye")[folders[chapter].last_position];a.ix=folders[chapter].last_position,see(a,1,-210)}if(e==-1)folders[chapter].data[folders[chapter].last_position].slid_count--,folders[chapter].data[folders[chapter].last_position].slid_count<0&&(folders[chapter].data[folders[chapter].last_position].slid_count=bilder()[folders[chapter].last_position].length);else{if(e>1||t)return folders[chapter].data[folders[chapter].last_position].slid_count=e,void change_image(folders[chapter].data[folders[chapter].last_position].comp_name+"_"+e);folders[chapter].data[folders[chapter].last_position].slid_count++,folders[chapter].data[folders[chapter].last_position].slid_count>bilder()[folders[chapter].last_position].length&&(folders[chapter].data[folders[chapter].last_position].slid_count=0)}change_image(folders[chapter].data[folders[chapter].last_position].comp_name+"_"+folders[chapter].data[folders[chapter].last_position].slid_count)}},get_page_scroll_position=function(e){return 0-e.getBoundingClientRect().top},white_head=function(){for(var e=document.getElementsByClassName("ueandtx"),t=get_page_scroll_position(e[0]),a=[],n=0;n<e.length;n++){var o=parseInt(e[n].offsetTop+210+e[n].offsetHeight/2);switch(!0){case o<t+210:a.push(e[n].offsetTop+e[n].offsetHeight);break;case o>t+210+window.innerHeight:a.push(e[n].offsetTop+parseInt((window.innerHeight-210)/2));break;default:a.push(o)}"undefined"!=typeof folders[chapter].data[n].epilog.App&&(app_display_data.act_app=folders[chapter].data[n].comp_name,document.getElementsByClassName("palma_app")[n].innerHTML=app_display_data[folders[chapter].data[n].comp_name].apendix())}var s=getNearestNumber(a,t+window.innerHeight/2+240);folders[chapter].last_position==s&&chapter==old_chapter||(old_chapter=chapter,folders[chapter].last_position=s,cc.style.height="auto",disable_cine=0==folders[chapter].data[folders[chapter].last_position].bilder.length,change_image(folders[chapter].data[folders[chapter].last_position].comp_name+"_"+folders[chapter].data[folders[chapter].last_position].slid_count),"undefined"!=typeof folders[chapter].data[s].map&&(document.getElementById("palma_map").innerHTML='<img src="images/gog.png" />',document.getElementById("palma_map").addEventListener("click",function(){window.location=window.navigator.userAgent.indexOf("iPad")!=-1||window.navigator.userAgent.indexOf("iPhone")!=-1?google_pad_map_url:google_map_link})))},snap=!1,snap_in=function(e){snap=!0,clearTimeout(sivId),sivId=setTimeout(function(){document.getElementById("header_txt").innerHTML="oki, lastpos: "+document.getElementsByClassName("scroll_positioner")[e],document.getElementsByClassName("scroll_positioner")[e].scrollIntoView({block:"start",behavior:"smooth"}),snap=!1},5e3)},preset_new_bg=function(e){if(!hg.set){hg.set=!0;var t=folders[chapter].data[folders[chapter].last_position].slid_count+e/Math.abs(e);t=t>bilder()[folders[chapter].last_position].length||0==t?"":t<0?"_"+bilder()[folders[chapter].last_position].length:"_"+t,hg.style.backgroundImage='url("'+img_type.path+folders[chapter].name+"/"+folders[chapter].data[folders[chapter].last_position].comp_name+t+img_type.ext+'")'}},fade_img=function(e,t){var e=document.getElementById(e);e.classList.add("change_img_in"),e.style.backgroundImage=t,setTimeout(function(){hg.style.backgroundImage=t,e.classList.remove("change_img_in")},400),hg.set=!1},jump_to=function(e,t){return jump_destination=!1,found.style.display="none",folders[t].last_position=e,t==chapter?void hit_menue(t,-1):void hit_menue(t)},hit_menue=function(e,t){found.classList.remove("found_in_out"),found.style.display="none";var a=folders[chapter].last_position,n=document.getElementsByClassName("items");isNaN(e)||(e=document.getElementsByClassName("items")[e]);for(var o=0;o<n.length;o++)if(n[o].style.color="#333",n[o]==e&&(disable_cine=!0,old_chapter="undefined"==typeof t?chapter:t,chapter=o,n[chapter].style.color="#bc123a","undefined"==typeof t)){cc.scrollTop=0;for(var s="",i=0;i<folders[chapter].data.length;i++)s+=inhalt(folders[chapter].data,i);cc.innerHTML=s}document.getElementById("hg_cover").style.display="block";for(var l=document.getElementsByClassName("ueandtx"),o=0;o<l.length;o++)"undefined"==typeof folders[chapter].data[o].slid_count&&(folders[chapter].data[o].slid_count=0),"undefined"==typeof folders[chapter].data[o].see_read_state&&(folders[chapter].data[o].see_read_state=1);if(toggle_favicons(),"undefined"==typeof folders[chapter].data[0].bilder){for(var o=0;o<l.length;o++)folders[chapter].data[o].bilder=[];clearInterval(foimId),foimId=setInterval(function(){1==preload_images.folder_imgs&&(clearInterval(foimId),preload_images.folder_imgs=!1,document.getElementsByClassName("scroll_positioner")[folders[chapter].last_position].scrollIntoView({block:"start",behavior:"smooth"}),folders[chapter].last_position==a&&(change_image(folders[chapter].data[folders[chapter].last_position].comp_name+"_"+folders[chapter].data[folders[chapter].last_position].slid_count),white_head()))},100),preload_images.get_arrays("sub",folders[chapter],"name")}else document.getElementsByClassName("scroll_positioner")[folders[chapter].last_position].scrollIntoView({block:"start",behavior:"smooth"}),folders[chapter].last_position==a&&(change_image(folders[chapter].data[folders[chapter].last_position].comp_name+"_"+folders[chapter].data[folders[chapter].last_position].slid_count),white_head())},search=function(e){jump_destination=!1,e.style.color="#fff",e.previousSibling.style.display=e.nextSibling.style.display="none";var t=e.value.toLowerCase().replace(/ /g,"");e:for(var a=0;a<folders.length;a++)for(var n=0;n<folders[a].data.length;n++)for(key in folders[a].data[n])if(folders[a].data[n].search.indexOf(t)!=-1){e.style.color="#bc123a",e.previousSibling.style.display=e.nextSibling.style.display="inline-block",e.nextSibling.style.display="inline-block",e.nextSibling.ix=n,e.nextSibling.fx=a,e.nextSibling.onclick=function(){jump_to(this.ix,this.fx)},jump_destination=[n,a];break e}},arrow=function(e){e||(e=window.event),jump_destination&&13==e.keyCode&&(found.children[0].children[1].blur(),jump_to(jump_destination[0],jump_destination[1]),found.style.display="none")},start_cine=function(){var e=document.getElementById("hg_cover");cc.addEventListener("touchstart",function(){0==disable_cine&&get_mouse_coords(e,this)},!1),cc.addEventListener("touchmove",function(){0==disable_cine&&check_swipe(e)},!1),cc.addEventListener("touchend",function(){0==disable_cine&&swap_now(e)},!1)},get_cine_script=function(){var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("charset","utf-8"),e.onload=function(){start_cine(),preload_images.get_arrays("kind",folders,"name")},e.src="js/cinema.min.js",document.getElementsByTagName("head")[0].appendChild(e)},page_load=function(){wlh=window.location.href,display_prel=document.getElementById("preloaded"),found=document.getElementById("found"),cc=document.getElementById("chapter_content"),hg=document.getElementById("hg"),hg.set=!1,document.body.removeChild(document.getElementsByClassName("fa-angle-left")[0]),document.body.removeChild(document.getElementsByClassName("fa-angle-right")[0]),document.body.removeChild(document.getElementById("hg_audio"));for(var e=0;e<folders.length;e++){for(var t=0;t<folders[e].data.length;t++)folders[e].data[t].search.push(folders[e].data[t].comp_name),folders[e].data[t].name.toLowerCase().replace(/ /g,"")!=folders[e].data[t].comp_name&&folders[e].data[t].search.push(folders[e].data[t].name.toLowerCase().replace(/ /g,""));"undefined"!=typeof folders[e].data[0].time&&folders[e].data.sort(function(e,t){return t.time.from[2]-e.time.from[2]});var a=document.createElement("div");a.className="items",a.ix=e,a.innerHTML=folders[e].menu_name,a.addEventListener("click",function(){hit_menue(this)},!1),document.getElementById("content").appendChild(a),folders[e].last_position=0}var t=document.createElement("div");t.className="item_search",t.innerHTML='<i class="fa fa-search" aria-hidden="true"></i>',t.addEventListener("click",function(){found.children[0].children[1].value="","block"==found.style.display?found.style.display="none":(found.style.display="block",found.children[0].children[1].focus())},!1),document.getElementById("content").insertBefore(t,document.getElementById("content").children[3]),found.innerHTML='<p><i class="fa fa-check search_check" aria-hidden="true"></i><input type="text" onkeyup="search(this)" placeholder=" ... suchen" /><i class="fa fa-arrow-circle-right" aria-hidden="true"></i></p>',cc.addEventListener("scroll",white_head,!1),window.addEventListener("keydown",arrow,!1),get_cine_script()};