var disable_cine=!0,sivId,fadeinmovId,foimId,speedId,wlh,folders,align_onresize=function(){var e=document.getElementById("chapter_menu");e&&"block"==e.style.display&&(e.style.display="none"),clearTimeout(resizeId),resizeId=setTimeout(function(){for(var e=document.getElementsByClassName("tx"),t=0;t<e.length;t++)e[t].style.WebkitColumnCount=e[t].style.MozColumnCount=e[t].style.columnCount=get_column_count(folders[chapter].data[t]).replace("column-count:","");jump_to(folders[chapter].last_position,chapter)},200)},get_column_count=function(){return"column-count:1"},inhalt=function(e,t){var a="";a+='<span class="scroll_positioner"></span><span class="ueandtx"><span class="ue">'+e[t].name,a+=e[t].time?" - "+adjustments_de.monthNames[e[t].time.from[1]-1]+" "+e[t].time.from[2]:"",a+=e[t].published?" - "+e[t].published.year:"";var n=get_column_count(),o='<i class="fa fa-download" aria-hidden="true"></i><i class="fa fa-pause" aria-hidden="true"></i><i class="fa fa-play" aria-hidden="true"></i><i class="fa fa-volume-off" aria-hidden="true"></i><i class="fa fa-volume-up" aria-hidden="true"></i><i class="fa fa-expand" aria-hidden="true"></i><i class="fa fa-eye" aria-hidden="true"></i><i class="fa fa-file-text-o" aria-hidden="true"></i>',s=o;a+='<span class="sh">'+s+'</span></span><span class="tx tx_out" style="-webkit-'+n+";-moz-"+n+";"+n+';">';var i=["",""];"undefined"!=typeof e[t].map&&(i=['<div id="palma_map"></div>','<div style="height:400px;"></div>']),"undefined"!=typeof e[t].form&&(i=['<div id="palma_form"></div>',"<div></div>"]);var r=2==i.length?["",""]:[i[2],i[3]];return a+=""==e[t].prolog?i[0]:i[0]+"<h2"+r[0]+">"+e[t].prolog+"</h2>"+r[1],a+=e[t].text+i[1]+"</span>",a+="</span>"},change_image=function(e){e=e.replace("_0","");var t=new Image;t.onerror=function(){change_image("default")},t.onload=function(){fade_img("hg_cover",'url("'+img_type.path+folders[chapter].name+"/"+e+img_type.ext+'")')},t.src=img_type.path+folders[chapter].name+"/"+e+img_type.ext},see=function(e,t,a){var n=e.ix;folders[chapter].data[n].see_read_state=t,1==t?(disable_cine=!1,e.style.display="none",e.nextSibling.style.display="inline-block",e.parentNode.style.marginTop="-42px",e.parentNode.parentNode.style.fontSize="3.6vw",e.parentNode.parentNode.style.textIndent="40px",e.parentNode.parentNode.style.background="rgba(191, 191, 191, 0.6)",e.parentNode.parentNode.style.borderTop="18px solid rgba(0, 0, 0, 0)",e.parentNode.parentNode.nextSibling.nextSibling&&(e.parentNode.parentNode.nextSibling.nextSibling.style.visibility="hidden"),e.parentNode.parentNode.nextSibling.style.visibility="hidden",e.parentNode.parentNode.parentNode.style.background="rgba(255,255,255,0)",e.parentNode.parentNode.parentNode.style.height=parseInt(window.innerHeight-60)+"px",document.getElementsByClassName("scroll_positioner")[n].style.marginTop=a+"px"):(disable_cine=!0,e.style.display="none",e.previousSibling.style.display="inline-block",e.parentNode.style.marginTop="-36px",e.parentNode.parentNode.style.fontSize="28px",e.parentNode.parentNode.style.textIndent=0,e.parentNode.parentNode.style.background="rgba(141, 170, 212, 1)",e.parentNode.parentNode.style.borderTop="0 none",e.parentNode.parentNode.nextSibling.style.visibility="visible",e.parentNode.parentNode.nextSibling.style.filter="none",e.parentNode.parentNode.nextSibling.style.color="#333",e.parentNode.parentNode.nextSibling.nextSibling&&(e.parentNode.parentNode.nextSibling.nextSibling.style.visibility="visible"),e.parentNode.parentNode.parentNode.style.background="rgba(255,255,255,0.9)",e.parentNode.parentNode.parentNode.style.height="auto",e.parentNode.parentNode.parentNode.offsetHeight<parseInt((window.innerHeight-300)/2)&&(e.parentNode.parentNode.parentNode.style.height=parseInt((window.innerHeight-300)/2)+"px"),document.getElementsByClassName("scroll_positioner")[n].style.marginTop="calc(180px - 50vh)")},toggle_favicons=function(){for(var e=document.getElementsByClassName("fa-download"),t=document.getElementsByClassName("fa-eye"),a=document.getElementsByClassName("fa-file-text-o"),n=0;n<t.length;n++)e[n].ix=t[n].ix=a[n].ix=n,0==chapter?e[n].style.visibility="hidden":(e[n].style.visibility="visible",e[n].addEventListener("touchend",function(){confirm('Möchten Sie das PDF Dossier über "'+folders[chapter].data[this.ix].name+'"\nherunterladen und speichern?')&&select_pdf.get_scr(this.ix)},!1)),t[n].addEventListener("touchend",function(){see(this,1,-210)},!1),1==folders[chapter].data[n].see_read_state&&see(t[n],1,-26),a[n].addEventListener("touchend",function(){see(this,0)},!1)},slide_lr=function(e,t){if("bestellen"!=folders[chapter].data[folders[chapter].last_position].comp_name){if(0==folders[chapter].data[folders[chapter].last_position].see_read_state){var a=document.getElementsByClassName("fa-eye")[folders[chapter].last_position];a.ix=folders[chapter].last_position,see(a,1,-210)}if(e==-1)folders[chapter].data[folders[chapter].last_position].slid_count--,folders[chapter].data[folders[chapter].last_position].slid_count<0&&(folders[chapter].data[folders[chapter].last_position].slid_count=bilder()[folders[chapter].last_position].length);else{if(e>1||t)return folders[chapter].data[folders[chapter].last_position].slid_count=e,void change_image(folders[chapter].data[folders[chapter].last_position].comp_name+"_"+e);folders[chapter].data[folders[chapter].last_position].slid_count++,folders[chapter].data[folders[chapter].last_position].slid_count>bilder()[folders[chapter].last_position].length&&(folders[chapter].data[folders[chapter].last_position].slid_count=0)}change_image(folders[chapter].data[folders[chapter].last_position].comp_name+"_"+folders[chapter].data[folders[chapter].last_position].slid_count)}},get_page_scroll_position=function(e){return console.log(0-e.getBoundingClientRect().top),0-e.getBoundingClientRect().top},white_head=function(){clearTimeout(sivId),sivId=setTimeout(function(){for(var e=get_page_scroll_position(document.getElementById("chapter_content")),t=document.getElementsByClassName("ueandtx"),a=[],n=0;n<t.length;n++){var o=parseInt(t[n].offsetTop+210+t[n].offsetHeight/2);switch(!0){case o<e+210:a.push(t[n].offsetTop+t[n].offsetHeight);break;case o>e+210+window.innerHeight:a.push(t[n].offsetTop+parseInt((window.innerHeight-210)/2));break;default:a.push(o)}}var s=getNearestNumber(a,e+window.innerHeight/2+240);return folders[chapter].last_position==s&&chapter==old_chapter?void console.log("(disabled) ireturn in middle of white_head"):(old_chapter=chapter,folders[chapter].last_position=s,document.getElementById("chapter_content").style.height="auto",void change_image(folders[chapter].data[folders[chapter].last_position].comp_name+"_"+folders[chapter].data[folders[chapter].last_position].slid_count))},100)},fade_img=function(e,t){var e=document.getElementById(e);e.classList.add("change_img_in"),e.style.backgroundImage=t,setTimeout(function(){e.classList.remove("change_img_in")},400)},jump_to=function(e,t){return jump_destination=!1,document.getElementById("chapter_menu").style.display="none",folders[t].last_position=e,t==chapter?void hit_menue(t,-1):void hit_menue(t)},hit_menue=function(e,t){found.classList.remove("found_in_out"),found.style.display="none";var a=folders[chapter].last_position,n=document.getElementsByClassName("items");isNaN(e)||(e=document.getElementsByClassName("items")[e]);for(var o=0;o<n.length;o++)if(n[o].style.color="#333",n[o]==e){disable_cine=!0,old_chapter="undefined"==typeof t?chapter:t,chapter=o,n[chapter].style.color="#bc123a";for(var s="",i=0;i<folders[chapter].data.length;i++)s+=inhalt(folders[chapter].data,i);document.getElementById("chapter_content").style.height=get_page_scroll_position(document.getElementById("chapter_content"))+window.innerHeight+"px",document.getElementById("chapter_content").innerHTML=s}document.getElementById("hg_cover").style.display="block";for(var r=document.getElementsByClassName("ueandtx"),o=0;o<r.length;o++)"undefined"==typeof folders[chapter].data[o].slid_count&&(folders[chapter].data[o].slid_count=0),"undefined"==typeof folders[chapter].data[o].see_read_state&&(folders[chapter].data[o].see_read_state=1);if(toggle_favicons(),"undefined"==typeof folders[chapter].data[0].bilder){for(var o=0;o<r.length;o++)folders[chapter].data[o].bilder=[];clearInterval(foimId),foimId=setInterval(function(){1==preload_images.folder_imgs&&(clearInterval(foimId),preload_images.folder_imgs=!1,document.getElementsByClassName("scroll_positioner")[folders[chapter].last_position].scrollIntoView({block:"start",behavior:"smooth"}),folders[chapter].last_position==a&&change_image(folders[chapter].data[folders[chapter].last_position].comp_name+"_"+folders[chapter].data[folders[chapter].last_position].slid_count))},100),preload_images.get_arrays("sub",folders[chapter],"name")}else document.getElementsByClassName("scroll_positioner")[folders[chapter].last_position].scrollIntoView({block:"start",behavior:"smooth"}),folders[chapter].last_position==a&&change_image(folders[chapter].data[folders[chapter].last_position].comp_name+"_"+folders[chapter].data[folders[chapter].last_position].slid_count);document.getElementById("header_txt").innerHTML=folders[chapter].intro},start_cine=function(){var e=document.getElementById("hg_cover");window.addEventListener("touchstart",function(){0==disable_cine&&get_mouse_coords(e)},!1),window.addEventListener("touchmove",function(){0==disable_cine&&check_swipe(e)},!1),window.addEventListener("touchend",function(){0==disable_cine&&swap_now(e)},!1)},get_cine_script=function(){loadXMLDoc("js/cinema.js",function(){if(4==xmlhttp.readyState)if(200==xmlhttp.status){var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("charset","utf-8"),e.innerHTML=xmlhttp.responseText,e.onload=function(){start_cine(),preload_images.get_arrays("kind",folders,"name")},e.src="js/cinema.js",document.getElementsByTagName("head")[0].appendChild(e)}else console.log("get_cine_script shit happens")})},page_load=function(){wlh=window.location.href,display_prel=document.getElementById("preloaded"),found=document.getElementById("found"),document.body.removeChild(document.getElementsByClassName("fa-angle-left")[0]),document.body.removeChild(document.getElementsByClassName("fa-angle-right")[0]),document.body.removeChild(document.getElementById("hg"));for(var e=0;e<folders.length;e++){for(var t=0;t<folders[e].data.length;t++)folders[e].data[t].search.push(folders[e].data[t].comp_name),folders[e].data[t].name.toLowerCase().replace(/ /g,"")!=folders[e].data[t].comp_name&&folders[e].data[t].search.push(folders[e].data[t].name.toLowerCase().replace(/ /g,""));"undefined"!=typeof folders[e].data[0].time&&folders[e].data.sort(function(e,t){return t.time.from[2]-e.time.from[2]});var a=document.createElement("div");a.className="items",a.ix=e,a.innerHTML=folders[e].menu_name,a.addEventListener("click",function(){hit_menue(this)},!1),folders[e].menu_ih='<span style="display:inline-block;">',folders[e].menu_ih+=0==e?'<p><input type="text" onkeyup="search(this)" placeholder=" ... in Palma3 suchen" /><i class="fa fa-check search_check" aria-hidden="true"></i><i class="fa fa-arrow-circle-right" aria-hidden="true"></i></p>':"";for(var n=0;n<folders[e].data.length;n++)folders[e].menu_ih+='<p onclick="jump_to('+n+","+e+')">'+folders[e].data[n].name+"</p>";folders[e].menu_ih+="</span>",document.getElementById("content").appendChild(a),document.getElementById("chapter_content").addEventListener("mouseover",function(){document.getElementById("chapter_menu").style.display="none"},!1),folders[e].last_position=0}document.getElementsByTagName("body")[0].addEventListener("scroll",white_head,!1),get_cine_script()};