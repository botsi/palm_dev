function loadXMLDoc(e,t){if(xmlhttp=new XMLHttpRequest,"undefined"!=typeof t)xmlhttp.onreadystatechange=t,xmlhttp.open("GET",e,!0);else{var a,r="",n=[];for(a in e)n.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));r=n.join("&").replace(/%20/g,"+"),xmlhttp.addEventListener("load",function(e){console.log(e.target.responseText),shop.display(!0)}),xmlhttp.addEventListener("error",function(e){alert("Oups! Something goes wrong.")}),xmlhttp.open("POST","scripts/sendmail.php"),xmlhttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}xmlhttp.send(r)}var resizeId,display_prel,cc,old_chapter=chapter=0,adjustments_de={dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesMin:["So","Mo","Di","Mi","Do","Fr","Sa"],monthNames:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesMin:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],years:[]},img_type={path:"images/",ext:".jpg"},attach_script=function(e){var t=function(e){var t=document.createElement("script");t.onload=function(){var t=document.createElement("link");t.onload=function(){page_load()},t.href="css/main"+e+".css?zuza"+Math.floor(1e3*Math.random()+1),t.rel="stylesheet",document.head.appendChild(t)},t.src="js/main"+e+".js",t.charset="utf-8",document.head.appendChild(t)};if("_desk"==e){var a=document.createElement("script");a.onload=function(){t(e)},a.src="js/additional_fc.min.js",a.charset="utf-8",document.head.appendChild(a)}else t(e)},isTouchSupported=function(){var e=window.navigator.msMaxTouchPoints,t="ontouchstart"in document.createElement("div");return!(!e&&!t)},check_webp_feature=function(e,t){var a={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"},r=new Image;r.onload=function(){var e=r.width>0&&r.height>0;t(e)},r.onerror=function(){t(!1)},r.src="data:image/webp;base64,"+a[e]},device_dimensions=function(){check_webp_feature("lossless",function(e){e&&(img_type.path="images/webp/",img_type.ext=".webp")});var e=screen.width,t=(screen.height,"");switch(!0){case e<401&&isTouchSupported():img_type.path="images/mobile/",img_type.ext=".jpg",t="_mobile";break;case e>400&&e<951&&isTouchSupported():t="_mobile";break;default:t="_desk"}attach_script(t)},preload_rest=function(e){for(var t=0;t<folders[chapter].data.length;t++)if(folders[chapter].data[t].bilder.length>2)for(var a=2;a<folders[chapter].data[t].bilder.length;a++){var r=new Image;r.src=img_type.path+e+"/"+folders[chapter].data[t].comp_name+"_"+a+img_type.ext}},preload_images={gia_calls:0,get_arrays:function(e,t,r){var n=Array.isArray(t)?t[preload_images.gia_calls][r]:t[r];loadXMLDoc("scripts/inhalte.php?ordner=../images/"+n+"/&zuza"+Math.floor(1e3*Math.random()+1),function(){if(4==xmlhttp.readyState)if(200==xmlhttp.status){preload_images.txt=xmlhttp.responseText,preload_images.temp=preload_images.txt.split(" ");var n=[];for(a in preload_images.temp)if(Array.isArray(t)){if(preload_images.temp[a].indexOf(".jpg")!=-1&&preload_images.temp[a].indexOf("_")==-1&&n.push(preload_images.temp[a]),preload_images.temp[a].indexOf(".mp4")!=-1){var l=preload_images.temp[a].replace(".mp4",""),s=folders[preload_images.gia_calls].data.map(function(e){return e.comp_name}).indexOf(l);folders[preload_images.gia_calls].data[s].epilog.Film=l}if(preload_images.temp[a].indexOf(".mp3")!=-1){var l=preload_images.temp[a].replace(".mp3",""),s=folders[preload_images.gia_calls].data.map(function(e){return e.comp_name}).indexOf(l);folders[preload_images.gia_calls].data[s].epilog.Hören=l}}else preload_images.temp[a].indexOf(".jpg")!=-1&&preload_images.temp[a].indexOf("_")!=-1&&n.push(preload_images.temp[a]);if(Array.isArray(t))for(var i=0;i<n.length;i++){preload_images.add_imp_button(n[i].replace(".jpg",""));var o=new Image;i==n.length-1&&(o.onload=function(){if(preload_images.gia_calls<t.length-1)preload_images.gia_calls++,preload_images.get_arrays(e,t,r);else{preload_images.gia_calls=0;var a=decodeURI(window.location.search.substring(1));if(a.length>0&&" "!=a){var n=search_nostyle(a);1==n.length?hit_menue(0):0==n[1]?(console.log("alt hit menue"),hit_menue(0),setTimeout(function(){jump_to(n[0],n[1])},400)):jump_to(n[0],n[1])}else hit_menue(0);for(var l="",s=0;s<display_prel.children.length;s++)display_prel.children[s].alt||(display_prel.children[s].alt=display_prel.children[s].title+" palma3",l+=display_prel.children[s].title+" ");var i=document.createElement("meta");i.name="keywords",i.content="botsi code palma3 bern "+l,document.head.appendChild(i)}}),o.src=img_type.path+t[preload_images.gia_calls][r]+"/"+(".jpg"==img_type.ext?n[i]:n[i].replace(".jpg",img_type.ext)),"default.jpg"!=n[i]&&(display_prel.innerHTML+='<img src="'+o.src+'" title="'+n[i].replace(".jpg","")+'" />')}else{for(var i=0;i<n.length;i++){var l=n[i].replace(".jpg","").split("_"),s=folders[chapter].data.map(function(e){return e.comp_name}).indexOf(l[0]);folders[chapter].data[s].bilder.push(l[1])}for(var i=0;i<folders[chapter].data.length;i++){var p=folders[chapter].data[i].bilder;if(p.length>0){var o=new Image;1==p.length&&i==folders[chapter].data.length-1&&(o.onload=function(){preload_images.folder_imgs=!0}),o.src=img_type.path+t[r]+"/"+folders[chapter].data[i].comp_name+"_1"+img_type.ext,display_prel.innerHTML+='<img src="'+o.src+'" />'}if(p.length>1){var o=new Image;i==folders[chapter].data.length-1&&(o.onload=function(){preload_images.folder_imgs=!0}),o.src=img_type.path+t[r]+"/"+folders[chapter].data[i].comp_name+"_"+p.length+img_type.ext,display_prel.innerHTML+='<img src="'+o.src+'" />'}0==p.length&&i==folders[chapter].data.length-1&&(preload_images.folder_imgs=!0)}setTimeout(function(){preload_rest(t[r])},100)}}else console.log("get_images_array shit happens")})},add_imp_button:function(e){var t=folders[preload_images.gia_calls].data.map(function(e){return e.comp_name}).indexOf(e);t!=-1&&"undefined"!=typeof folders[preload_images.gia_calls].data[t].epilog&&(folders[preload_images.gia_calls].data[t].epilog.Impressionen=preload_images.txt.indexOf(e+"_")!=-1?1:0)}},bilder=function(){for(var e=folders[chapter].data,t=[],a=0;a<e.length;a++)t.push(e[a].bilder);return t},getNearestNumber=function(e,t){if((a=e.length)<2)return a-1;for(var a,r=Math.abs(e[--a]-t);a--&&!(r<(r=Math.abs(e[a]-t))););return a+1},toggleFullScreen=function(){vid.requestFullscreen?vid.requestFullscreen():vid.mozRequestFullScreen?vid.mozRequestFullScreen():vid.webkitRequestFullscreen&&vid.webkitRequestFullscreen()},getchildindex=function(e){for(var t=0;null!=(e=e.previousSibling);)t++;return t},calc_min_slid_height=function(e){var t=26*e+108;return t>=(window.innerHeight-300)/2+24?t:(window.innerHeight-300)/2+24},search_nostyle=function(e){var t=!1;if("string"==typeof e){var a=e.toLowerCase().replace(/ /g,"");t=!0}else var a=e.innerHTML.toLowerCase().replace(/ /g,"").replace("(palma3)","");e:for(var r=0;r<folders.length;r++)for(var n=0;n<folders[r].data.length;n++)for(key in folders[r].data[n])if(folders[r].data[n].search.indexOf(a)!=-1){if(t){t=!1;var l=[n,r];return l}jump_to(n,r);break e}if(t)return[0]},page_reload=function(){window.location.href=wlh},pdf_m=!1,select_pdf={act_log:function(e){var t=e.comp_name;return e.epilog.Dossier.indexOf("Einleitung")!=-1&&(t+="_e"),e.epilog.Dossier.indexOf("Orte und Daten")!=-1&&(t+="_o"),e.epilog.Dossier.indexOf("Ausstellungskonzept")!=-1&&(t+="_a"),e.epilog.Dossier.indexOf("Impressum")!=-1&&(t+="_i"),t},log:[],get_scr:function(e){if(pdf_m)"undefined"!=typeof e&&select_pdf.collect(e);else{var t=document.createElement("script");t.onload=function(){var t=document.createElement("script");t.onload=function(){var t=document.createElement("script");t.onload=function(){console.log(e),"undefined"!=typeof e&&select_pdf.collect(e)},t.src="scripts/pdfmake/vfs_fonts.js",t.charset="utf-8",document.head.appendChild(t)},t.src="scripts/pdfmake/pdfmake.min.js",t.charset="utf-8",document.head.appendChild(t)},t.src="images/pdf_head_base64.js",t.charset="utf-8",document.head.appendChild(t),pdf_m=!0}},addorremove:function(e,t){e.classList.contains("form_check_white")?(e.classList.remove("form_check_white"),e.classList.add("form_check_blue"),e.nextSibling.style.visibility="visible",folders[chapter].data[folders[chapter].last_position].epilog.Dossier.indexOf(t)==-1&&folders[chapter].data[folders[chapter].last_position].epilog.Dossier.push(t)):(e.classList.remove("form_check_blue"),e.classList.add("form_check_white"),e.nextSibling.style.visibility="hidden",folders[chapter].data[folders[chapter].last_position].epilog.Dossier.indexOf(t)!=-1&&folders[chapter].data[folders[chapter].last_position].epilog.Dossier.splice(folders[chapter].data[folders[chapter].last_position].epilog.Dossier.indexOf(t),1)),e.parentNode.parentNode.lastChild.getElementsByClassName("alert_line")[0].style.visibility=select_pdf.log.indexOf(select_pdf.act_log(folders[chapter].data[folders[chapter].last_position]))==-1?"hidden":"visible",e.parentNode.parentNode.lastChild.style.opacity=0==folders[chapter].data[folders[chapter].last_position].epilog.Dossier.length?.2:1,e.parentNode.parentNode.lastChild.children[0].style.cursor=0==folders[chapter].data[folders[chapter].last_position].epilog.Dossier.length?"default":"pointer"},collect:function(e){"undefined"!=typeof e?folders[chapter].data[e].epilog.Dossier&&(0==folders[chapter].data[e].epilog.Dossier.length&&(folders[chapter].data[e].epilog.Dossier.push("Einleitung"),folders[chapter].data[e].epilog.Dossier.push("Orte und Daten"),""!=folders[chapter].data[e].epilog.Impressum&&folders[chapter].data[e].epilog.Dossier.push("Impressum")),download_pdf()):folders[chapter].data[folders[chapter].last_position].epilog.Dossier.length>0?download_pdf():alert(folders[chapter].data[folders[chapter].last_position].epilog.Dossier.length+"iphone")},cleanup:function(e,t,a){var r=document.createElement("div");if(r.innerHTML=e,Array.isArray(a))return function(){return r.innerHTML.replace(/<\/strong>/g,"\n").replace(/<strong>/g,"\n\n").replace(/<\/p>/g,"\n").split("<p>")}();for(var n=r.getElementsByTagName(t);n.length;){for(var l=n[0].parentNode;n[0].firstChild;)l.insertBefore(n[0].firstChild,n[0]);l.removeChild(n[0])}return"a"==t&&r.innerHTML.indexOf(" &amp; ")!=-1&&(r.innerHTML=r.innerHTML.replace(" &amp; "," and ")),r.innerHTML}},base64,download_pdf=function(){var e=folders[chapter].data[folders[chapter].last_position],t=[{image:base64,width:520},{text:"\n",style:"header"},{text:e.name+" - "+adjustments_de.monthNames[e.time.from[1]-1]+" "+e.time.from[2],style:"header"},{text:"\n",style:"header"}];if(e.epilog.Dossier.indexOf("Einleitung")!=-1){t.push({text:"\n",style:"header"},{text:"  Einleitung  \n",style:"header_blue"},{text:"\n",style:"header"},{text:e.prolog.replace(/<br>/g,"\n\n").replace(/<br\/>/g,"\n\n")+"\n",style:"header"},{text:"\n",style:"header"});var a=e.text;if(a.indexOf("</a>")!=-1){var r=document.createElement("div");r.innerHTML=a;for(var n=r.getElementsByTagName("a");n.length;){for(var l=n[0].parentNode;n[0].firstChild;)l.insertBefore(n[0].firstChild,n[0]);l.removeChild(n[0])}a=r.innerHTML}t.push({text:a.replace(/<br>/g,"\n").replace(/<br\/>/g,"\n")+"\n"}),e.epilog.Dossier.indexOf("Orte und Daten")==-1&&e.epilog.Dossier.indexOf("Impressum")==-1&&e.epilog.Dossier.indexOf("Ausstellungskonzept")==-1||t.push({text:"",pageBreak:"after"})}if(e.epilog.Dossier.indexOf("Ausstellungskonzept")!=-1){t.push({text:"\n",style:"header"},{text:"  Ausstellungskonzept  \n",style:"header_blue"},{text:"\n",style:"header"});var s=document.createElement("div");s.innerHTML=e.epilog.Ausstellungskonzept;for(var i=0;i<s.children.length;i++)if("h2"==s.children[i].tagName.toLowerCase())t.push({text:"\n",style:"header"}),t.push({text:s.children[i].innerHTML.replace(/<br>/g,"\n\n").replace(/<br\/>/g,"\n\n"),style:"header"});else{t.push({text:"\n\n"});var o=s.children[i].innerHTML;if(o=function(){return select_pdf.cleanup(o,"a")}(),o=function(){return select_pdf.cleanup(o,"li")}(),o.indexOf("</p>")!=-1){o=function(){return select_pdf.cleanup(o,"p",[])}();for(var p=0;p<o.length;p++)t.push({text:o[p]})}else t.push({text:o.replace(/<br>/g,"\n").replace(/<br\/>/g,"\n")});t.push({text:"\n"})}e.epilog.Dossier.indexOf("Orte und Daten")==-1&&e.epilog.Dossier.indexOf("Impressum")==-1||t.push({text:"",pageBreak:"after"})}if(e.epilog.Dossier.indexOf("Impressum")!=-1){t.push({text:"\n",style:"header"},{text:"  Impressum  \n",style:"header_blue"},{text:"\n",style:"header"});for(var d in e.epilog.Impressum){var c=e.epilog.Impressum[d][0].replace(/,/g,"");if(e.epilog.Impressum[d].length>1)for(var m=1;m<e.epilog.Impressum[d].length;m++)c+=", "+e.epilog.Impressum[d][m].replace(/,/g,"");c.indexOf("</a>")!=-1&&(c=select_pdf.cleanup(c,"a")),t.push({text:"\n",style:"header"},{text:d+"\n",style:"header"},{text:"\n",style:"header"}),t.push({text:c+"\n"}),t.push({text:"\n"})}e.epilog.Dossier.indexOf("Orte und Daten")!=-1&&t.push({text:"",pageBreak:"after"})}if(e.epilog.Dossier.indexOf("Orte und Daten")!=-1){t.push({text:"\n",style:"header"},{text:"  Orte und Daten  \n",style:"header_blue"},{text:"\n",style:"header"});var s=document.createElement("div");s.innerHTML=e.epilog.Ausstellungsort;for(var g=s.getElementsByTagName("span"),f="xyz",h=0;h<g.length;h++){g[h].getElementsByTagName("p")[0].innerHTML!=f&&t.push({text:"\n",style:"header"},{text:g[h].getElementsByTagName("p")[0].innerHTML+"\n",style:"header"},{text:"\n"}),f=g[h].getElementsByTagName("p")[0].innerHTML;var u=g[h].getElementsByTagName("p")[1].innerHTML+"\n"+g[h].getElementsByTagName("p")[2].innerHTML+"\n"+g[h].getElementsByTagName("p")[3].innerHTML;if(t.push({text:u+"\n\n"}),g[h].getElementsByTagName("p").length>5){var _=g[h].getElementsByTagName("p")[5].innerHTML;t.push({text:_+"\n\n",link:"http://"+_})}t.push({text:"\n"})}}var A={footer:function(t,a){return t==a?{text:"© 2017 | www.palma3.ch",link:"http://www.palma3.ch/new_palma/?"+e.comp_name,margin:[40,-20,0,0]}:""},pageSize:"A4",content:t,styles:{header:{color:"#bc123a",fontSize:20,bold:!0},header_blue:{color:"#fff",background:"#8daad4",margin:[8,0,0,0],fontSize:16}}};select_pdf.log.indexOf(select_pdf.act_log(e))==-1?(select_pdf.log.push(select_pdf.act_log(e)),pdfMake.createPdf(A).download(e.comp_name+".pdf")):document.getElementsByClassName("alert_line")[folders[chapter].last_position].style.visibility="visible"};