function loadXMLDoc(e,t){if(xmlhttp=new XMLHttpRequest,"undefined"!=typeof t)xmlhttp.onreadystatechange=t,xmlhttp.open("GET",e,!0);else{var a,r="",i=[];for(a in e)i.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));r=i.join("&").replace(/%20/g,"+"),xmlhttp.addEventListener("load",function(e){console.log(e.target.responseText),shop.display(!0)}),xmlhttp.addEventListener("error",function(e){alert("Oups! Something goes wrong.")}),xmlhttp.open("POST","scripts/sendmail.php"),xmlhttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}xmlhttp.send(r)}var resizeId,display_prel,cc,old_chapter=chapter=0,adjustments_de={dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesMin:["So","Mo","Di","Mi","Do","Fr","Sa"],monthNames:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesMin:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],years:[]},img_type={path:"images/",ext:".jpg"},app_display_data={act_app:"",maxfrisch:{img_ix:[1,4,8,12,14,18,21,27,31,35,39,41,45],plc_tx:["Rosenhof, Brunnen","Bodega Española","Hotel Storchen","Kirche St. Peter","Elfuhrgeläute auf der Münsterbrücke","Café Terrasse","Café Odeon","Kronenhalle","Stadelhofer Passage, letzte Wohnung von Max Frisch","Schauspielhaus Zürich","Kantonales Realgymnasium","Universität Zürich","ETH Zürich"],apendix:function(){var e=["Erhältlich im App Store:",'<a href="https://itunes.apple.com/de/app/id573495442?mt=8" target="_blank"><img src="mediaguides/apples-app-store.png" alt="Zum download im App Store" height="70" width="70"></a>'],t=["Erhältlich im Google Play Store:",'<a href="https://play.google.com/store/apps/details?id=com.tatentraeger.maxfrischapp" target="_blank"><img src="mediaguides/google_play.png" alt="Zum download im Google Play Store" height="70" width="217"></a>'];if(isTouchSupported())var a=window.navigator.userAgent.indexOf("iPad")!=-1||window.navigator.userAgent.indexOf("iPhone")!=-1?e:t;else var a=["Erhältlich im App Store für iPhones und Google Play Store:",e[1]+" "+t[1]];return'<p>Wählen sie einen Spaziergang.</p><p><img class="artwork" src="mediaguides/'+app_display_data.act_app+'/app_artwork.jpg" alt="App Artwork" height="175" width="175"></p><p>Die  App bietet Ihnen:</p><ul><li>drei Stadtspaziergänge durch verschiedene Quartiere der Stadt Zürich</li><li>21 Audiostationen mit  Informationen über Leben und Werk von Max Frisch</li><li>rund 40 Minuten Audioführung</li><li>rund 68 Abbildungen</li><li>GPS-Lokalisierung Ihres Standortes</li><li>kostenlosen Download</li></ul><p>'+a[0]+"</p><p>"+a[1]+"</p>"}},monteverita:{img_ix:[1,3,4,15,9,18,13],apendix:function(){var e=["Erhältlich im App Store:",'<a href="https://itunes.apple.com/ch/app/mediaguide-monte-verita/id975156405?l=de&mt=8" target="_blank"><img src="mediaguides/apples-app-store.png" alt="Zum download im App Store" height="70" width="70"></a>'],t=["Erhältlich im Google Play Store:",'<a href="https://play.google.com/store/apps/details?id=org.webatelier.monteverita" target="_blank"><img src="mediaguides/google_play.png" alt="Zum download im Google Play Store" height="70" width="217"></a>'];if(isTouchSupported())var a=window.navigator.userAgent.indexOf("iPad")!=-1||window.navigator.userAgent.indexOf("iPhone")!=-1?e:t;else var a=["Erhältlich im App Store für iPhones und Google Play Store:",e[1]+" "+t[1]];return'<p>Wählen sie ein Thema aus der App.</p><p><img class="artwork" src="mediaguides/'+app_display_data.act_app+'/app_artwork.jpg" alt="App Artwork" height="175" width="175"></p><p>Die  App bietet Ihnen:</p><ul><li>Audioguide mit historischen Fotografien</li><li>Videoguide von Harald Szeemann und zu Labans Ikosaeder</li><li>Geschichte, Epochen und Persönlichkeiten des Monte Verità</li><li>Der Monte Verità heute</li><li>Gästebuch</li><li>Persönlichkeitstest: Was für ein Monteveritaner sind Sie?</li><li>Sprachen: Deutsch, Italienisch, Französisch, Englisch</li></ul><p>'+a[0]+"</p><p>"+a[1]+"</p>"}}},attach_script=function(e){var t=function(e){var t=document.createElement("script");t.onload=function(){var t=document.createElement("link");t.onload=function(){page_load()},t.href="css/main"+e+".css?zuza"+Math.floor(1e3*Math.random()+1),t.rel="stylesheet",document.head.appendChild(t)},t.src="js/main"+e+".min.js",t.charset="utf-8",document.head.appendChild(t)};if("_desk"==e){var a=document.createElement("script");a.onload=function(){t(e)},a.src="js/additional_fc.min.js",a.charset="utf-8",document.head.appendChild(a)}else t(e)},isTouchSupported=function(){var e=window.navigator.msMaxTouchPoints,t="ontouchstart"in document.createElement("div");return!(!e&&!t)},check_webp_feature=function(e,t){var a={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"},r=new Image;r.onload=function(){var e=r.width>0&&r.height>0;t(e)},r.onerror=function(){t(!1)},r.src="data:image/webp;base64,"+a[e]},device_dimensions=function(){check_webp_feature("lossless",function(e){e&&(img_type.path="images/webp/",img_type.ext=".webp")});var e=screen.width,t=(screen.height,"");switch(!0){case e<401&&isTouchSupported():img_type.path="images/mobile/",img_type.ext=".jpg",t="_mobile";break;case e>400&&e<951&&isTouchSupported():t="_mobile";break;default:t="_desk"}attach_script(t)},preload_rest=function(e){for(var t=0;t<folders[chapter].data.length;t++)if(folders[chapter].data[t].bilder.length>2)for(var a=2;a<folders[chapter].data[t].bilder.length;a++){var r=new Image;r.src=img_type.path+e+"/"+folders[chapter].data[t].comp_name+"_"+a+img_type.ext}},preload_images={gia_calls:0,get_arrays:function(e,t,r){var i=Array.isArray(t)?t[preload_images.gia_calls][r]:t[r];loadXMLDoc("scripts/inhalte.php?ordner=../images/"+i+"/&zuza"+Math.floor(1e3*Math.random()+1),function(){if(4==xmlhttp.readyState)if(200==xmlhttp.status){preload_images.txt=xmlhttp.responseText,preload_images.temp=preload_images.txt.split(" ");var i=[];for(a in preload_images.temp)if(Array.isArray(t)){if(preload_images.temp[a].indexOf(".jpg")!=-1&&preload_images.temp[a].indexOf("_")==-1&&i.push(preload_images.temp[a]),preload_images.temp[a].indexOf(".mp4")!=-1){var n=preload_images.temp[a].replace(".mp4",""),l=folders[preload_images.gia_calls].data.map(function(e){return e.comp_name}).indexOf(n);folders[preload_images.gia_calls].data[l].epilog.Film=n}if(preload_images.temp[a].indexOf(".mp3")!=-1){var n=preload_images.temp[a].replace(".mp3",""),l=folders[preload_images.gia_calls].data.map(function(e){return e.comp_name}).indexOf(n);folders[preload_images.gia_calls].data[l].epilog.Hören=n}}else preload_images.temp[a].indexOf(".jpg")!=-1&&preload_images.temp[a].indexOf("_")!=-1&&i.push(preload_images.temp[a]);if(Array.isArray(t))for(var s=0;s<i.length;s++){preload_images.add_imp_button(i[s].replace(".jpg",""));var o=new Image;s==i.length-1&&(o.onload=function(){if(preload_images.gia_calls<t.length-1)preload_images.gia_calls++,preload_images.get_arrays(e,t,r);else{preload_images.gia_calls=0;var a=decodeURI(window.location.search.substring(1));if(a.length>0&&" "!=a){var i=search_nostyle(a);1==i.length?hit_menue(0):0==i[1]?(console.log("alt hit menue"),hit_menue(0),setTimeout(function(){jump_to(i[0],i[1])},400)):jump_to(i[0],i[1])}else hit_menue(0);for(var n="",l=0;l<display_prel.children.length;l++)display_prel.children[l].alt||(display_prel.children[l].alt=display_prel.children[l].title+" palma3",n+=display_prel.children[l].title+" ");var s=document.createElement("meta");s.name="keywords",s.content="botsi code palma3 bern "+n,document.head.appendChild(s)}}),o.src=img_type.path+t[preload_images.gia_calls][r]+"/"+(".jpg"==img_type.ext?i[s]:i[s].replace(".jpg",img_type.ext)),"default.jpg"!=i[s]&&(display_prel.innerHTML+='<img src="'+o.src+'" title="'+i[s].replace(".jpg","")+'" />')}else{for(var s=0;s<i.length;s++){var n=i[s].replace(".jpg","").split("_"),l=folders[chapter].data.map(function(e){return e.comp_name}).indexOf(n[0]);folders[chapter].data[l].bilder.push(n[1])}for(var s=0;s<folders[chapter].data.length;s++){var p=folders[chapter].data[s].bilder;if(p.length>0){var o=new Image;1==p.length&&s==folders[chapter].data.length-1&&(o.onload=function(){preload_images.folder_imgs=!0}),o.src=img_type.path+t[r]+"/"+folders[chapter].data[s].comp_name+"_1"+img_type.ext,display_prel.innerHTML+='<img src="'+o.src+'" />'}if(p.length>1){var o=new Image;s==folders[chapter].data.length-1&&(o.onload=function(){preload_images.folder_imgs=!0}),o.src=img_type.path+t[r]+"/"+folders[chapter].data[s].comp_name+"_"+p.length+img_type.ext,display_prel.innerHTML+='<img src="'+o.src+'" />'}0==p.length&&s==folders[chapter].data.length-1&&(preload_images.folder_imgs=!0)}setTimeout(function(){preload_rest(t[r])},100)}}else console.log("get_images_array shit happens")})},add_imp_button:function(e){var t=folders[preload_images.gia_calls].data.map(function(e){return e.comp_name}).indexOf(e);t!=-1&&"undefined"!=typeof folders[preload_images.gia_calls].data[t].epilog&&(folders[preload_images.gia_calls].data[t].epilog.Impressionen=preload_images.txt.indexOf(e+"_")!=-1?1:0)}},bilder=function(){for(var e=folders[chapter].data,t=[],a=0;a<e.length;a++)t.push(e[a].bilder);return t},getNearestNumber=function(e,t){if((a=e.length)<2)return a-1;for(var a,r=Math.abs(e[--a]-t);a--&&!(r<(r=Math.abs(e[a]-t))););return a+1},toggleFullScreen=function(){vid.requestFullscreen?vid.requestFullscreen():vid.mozRequestFullScreen?vid.mozRequestFullScreen():vid.webkitRequestFullscreen&&vid.webkitRequestFullscreen()},getchildindex=function(e){for(var t=0;null!=(e=e.previousSibling);)t++;return t},calc_min_slid_height=function(e){var t=26*e+108;return t>=(window.innerHeight-300)/2+24?t:(window.innerHeight-300)/2+24},search_nostyle=function(e){var t=!1;if("string"==typeof e){var a=e.toLowerCase().replace(/ /g,"");t=!0}else var a=e.innerHTML.toLowerCase().replace(/ /g,"").replace("(palma3)","");e:for(var r=0;r<folders.length;r++)for(var i=0;i<folders[r].data.length;i++)for(key in folders[r].data[i])if(folders[r].data[i].search.indexOf(a)!=-1){if(t){t=!1;var n=[i,r];return n}jump_to(i,r);break e}if(t)return[0]},page_reload=function(){window.location.href=wlh},pdf_m=!1,select_pdf={act_log:function(e){var t=e.comp_name;return e.epilog.Dossier.indexOf("Einleitung")!=-1&&(t+="_e"),e.epilog.Dossier.indexOf("Orte und Daten")!=-1&&(t+="_o"),e.epilog.Dossier.indexOf("Ausstellungskonzept")!=-1&&(t+="_a"),e.epilog.Dossier.indexOf("Impressum")!=-1&&(t+="_i"),t},log:[],get_scr:function(e){if(pdf_m)"undefined"!=typeof e&&select_pdf.collect(e);else{var t=document.createElement("script");t.onload=function(){var t=document.createElement("script");t.onload=function(){var t=document.createElement("script");t.onload=function(){console.log(e),"undefined"!=typeof e&&select_pdf.collect(e)},t.src="scripts/pdfmake/vfs_fonts.js",t.charset="utf-8",document.head.appendChild(t)},t.src="scripts/pdfmake/pdfmake.min.js",t.charset="utf-8",document.head.appendChild(t)},t.src="images/pdf_head_base64.js",t.charset="utf-8",document.head.appendChild(t),pdf_m=!0}},addorremove:function(e,t){e.classList.contains("form_check_white")?(e.classList.remove("form_check_white"),e.classList.add("form_check_blue"),e.nextSibling.style.visibility="visible",folders[chapter].data[folders[chapter].last_position].epilog.Dossier.indexOf(t)==-1&&folders[chapter].data[folders[chapter].last_position].epilog.Dossier.push(t)):(e.classList.remove("form_check_blue"),e.classList.add("form_check_white"),e.nextSibling.style.visibility="hidden",folders[chapter].data[folders[chapter].last_position].epilog.Dossier.indexOf(t)!=-1&&folders[chapter].data[folders[chapter].last_position].epilog.Dossier.splice(folders[chapter].data[folders[chapter].last_position].epilog.Dossier.indexOf(t),1)),e.parentNode.parentNode.lastChild.getElementsByClassName("alert_line")[0].style.visibility=select_pdf.log.indexOf(select_pdf.act_log(folders[chapter].data[folders[chapter].last_position]))==-1?"hidden":"visible",e.parentNode.parentNode.lastChild.style.opacity=0==folders[chapter].data[folders[chapter].last_position].epilog.Dossier.length?.2:1,e.parentNode.parentNode.lastChild.children[0].style.cursor=0==folders[chapter].data[folders[chapter].last_position].epilog.Dossier.length?"default":"pointer"},collect:function(e){"undefined"!=typeof e?folders[chapter].data[e].epilog.Dossier&&(0==folders[chapter].data[e].epilog.Dossier.length&&(folders[chapter].data[e].epilog.Dossier.push("Einleitung"),folders[chapter].data[e].epilog.Dossier.push("Orte und Daten"),""!=folders[chapter].data[e].epilog.Impressum&&folders[chapter].data[e].epilog.Dossier.push("Impressum")),download_pdf()):folders[chapter].data[folders[chapter].last_position].epilog.Dossier.length>0?download_pdf():alert(folders[chapter].data[folders[chapter].last_position].epilog.Dossier.length+"iphone")},cleanup:function(e,t,a){var r=document.createElement("div");if(r.innerHTML=e,Array.isArray(a))return function(){return r.innerHTML.replace(/<\/strong>/g,"\n").replace(/<strong>/g,"\n\n").replace(/<\/p>/g,"\n").split("<p>")}();for(var i=r.getElementsByTagName(t);i.length;){for(var n=i[0].parentNode;i[0].firstChild;)n.insertBefore(i[0].firstChild,i[0]);n.removeChild(i[0])}return"a"==t&&r.innerHTML.indexOf(" &amp; ")!=-1&&(r.innerHTML=r.innerHTML.replace(" &amp; "," and ")),r.innerHTML}},base64,download_pdf=function(){var e=folders[chapter].data[folders[chapter].last_position],t=[{image:base64,width:520},{text:"\n",style:"header"},{text:e.name+" - "+adjustments_de.monthNames[e.time.from[1]-1]+" "+e.time.from[2],style:"header"},{text:"\n",style:"header"}];if(e.epilog.Dossier.indexOf("Einleitung")!=-1){t.push({text:"\n",style:"header"},{text:"  Einleitung  \n",style:"header_blue"},{text:"\n",style:"header"},{text:e.prolog.replace(/<br>/g,"\n\n").replace(/<br\/>/g,"\n\n")+"\n",style:"header"},{text:"\n",style:"header"});var a=e.text;if(a.indexOf("</a>")!=-1){var r=document.createElement("div");r.innerHTML=a;for(var i=r.getElementsByTagName("a");i.length;){for(var n=i[0].parentNode;i[0].firstChild;)n.insertBefore(i[0].firstChild,i[0]);n.removeChild(i[0])}a=r.innerHTML}t.push({text:a.replace(/<br>/g,"\n").replace(/<br\/>/g,"\n")+"\n"}),e.epilog.Dossier.indexOf("Orte und Daten")==-1&&e.epilog.Dossier.indexOf("Impressum")==-1&&e.epilog.Dossier.indexOf("Ausstellungskonzept")==-1||t.push({text:"",pageBreak:"after"})}if(e.epilog.Dossier.indexOf("Ausstellungskonzept")!=-1){t.push({text:"\n",style:"header"},{text:"  Ausstellungskonzept  \n",style:"header_blue"},{text:"\n",style:"header"});var l=document.createElement("div");l.innerHTML=e.epilog.Ausstellungskonzept;for(var s=0;s<l.children.length;s++)if("h2"==l.children[s].tagName.toLowerCase())t.push({text:"\n",style:"header"}),t.push({text:l.children[s].innerHTML.replace(/<br>/g,"\n\n").replace(/<br\/>/g,"\n\n"),style:"header"});else{t.push({text:"\n\n"});var o=l.children[s].innerHTML;if(o=function(){return select_pdf.cleanup(o,"a")}(),o=function(){return select_pdf.cleanup(o,"li")}(),o.indexOf("</p>")!=-1){o=function(){return select_pdf.cleanup(o,"p",[])}();for(var p=0;p<o.length;p++)t.push({text:o[p]})}else t.push({text:o.replace(/<br>/g,"\n").replace(/<br\/>/g,"\n")});t.push({text:"\n"})}e.epilog.Dossier.indexOf("Orte und Daten")==-1&&e.epilog.Dossier.indexOf("Impressum")==-1||t.push({text:"",pageBreak:"after"})}if(e.epilog.Dossier.indexOf("Impressum")!=-1){t.push({text:"\n",style:"header"},{text:"  Impressum  \n",style:"header_blue"},{text:"\n",style:"header"});for(var d in e.epilog.Impressum){var c=e.epilog.Impressum[d][0].replace(/,/g,"");if(e.epilog.Impressum[d].length>1)for(var h=1;h<e.epilog.Impressum[d].length;h++)c+=", "+e.epilog.Impressum[d][h].replace(/,/g,"");c.indexOf("</a>")!=-1&&(c=select_pdf.cleanup(c,"a")),t.push({text:"\n",style:"header"},{text:d+"\n",style:"header"},{text:"\n",style:"header"}),t.push({text:c+"\n"}),t.push({text:"\n"})}e.epilog.Dossier.indexOf("Orte und Daten")!=-1&&t.push({text:"",pageBreak:"after"})}if(e.epilog.Dossier.indexOf("Orte und Daten")!=-1){t.push({text:"\n",style:"header"},{text:"  Orte und Daten  \n",style:"header_blue"},{text:"\n",style:"header"});var l=document.createElement("div");l.innerHTML=e.epilog.Ausstellungsort;for(var g=l.getElementsByTagName("span"),m="xyz",u=0;u<g.length;u++){g[u].getElementsByTagName("p")[0].innerHTML!=m&&t.push({text:"\n",style:"header"},{text:g[u].getElementsByTagName("p")[0].innerHTML+"\n",style:"header"},{text:"\n"}),m=g[u].getElementsByTagName("p")[0].innerHTML;var f=g[u].getElementsByTagName("p")[1].innerHTML+"\n"+g[u].getElementsByTagName("p")[2].innerHTML+"\n"+g[u].getElementsByTagName("p")[3].innerHTML;if(t.push({text:f+"\n\n"}),g[u].getElementsByTagName("p").length>5){var _=g[u].getElementsByTagName("p")[5].innerHTML;t.push({text:_+"\n\n",link:"http://"+_})}t.push({text:"\n"})}}var A={footer:function(t,a){return t==a?{text:"© 2017 | www.palma3.ch",link:"http://www.palma3.ch/new_palma/?"+e.comp_name,margin:[40,-20,0,0]}:""},pageSize:"A4",content:t,styles:{header:{color:"#bc123a",fontSize:20,bold:!0},header_blue:{color:"#fff",background:"#8daad4",margin:[8,0,0,0],fontSize:16}}};select_pdf.log.indexOf(select_pdf.act_log(e))==-1?(select_pdf.log.push(select_pdf.act_log(e)),pdfMake.createPdf(A).download(e.comp_name+".pdf")):document.getElementsByClassName("alert_line")[folders[chapter].last_position].style.visibility="visible"};