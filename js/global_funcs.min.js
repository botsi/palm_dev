function draw_centro_mv_img(e,t){s&&(s=null);var s=document.createElement("canvas");s.width=298,s.height=600;var i=s.getContext("2d");i.drawImage(t,0,0),i.fillStyle="#000",i.strokeStyle="#999",i.font="12px Helvetica";for(var a=0;a<e.length;a++)i.fillText(e[a],32,136+48*a),i.moveTo(32,154+48*a),i.lineTo(s.width-32,154+48*a),i.stroke();return s.toDataURL()}function loadXMLDoc(e,t){if(xmlhttp=new XMLHttpRequest,"undefined"!=typeof t)xmlhttp.onreadystatechange=t,xmlhttp.open("GET",e,!0);else{var s,i="",a=[];for(s in e)a.push(encodeURIComponent(s)+"="+encodeURIComponent(e[s]));i=a.join("&").replace(/%20/g,"+"),xmlhttp.addEventListener("load",function(e){console.log(e.target.responseText),shop.display(!0)}),xmlhttp.addEventListener("error",function(e){alert("Oups! Something goes wrong.")}),xmlhttp.open("POST","scripts/sendmail.php"),xmlhttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}xmlhttp.send(i)}var mergeObjects=function(){for(var e={},t=0;t<arguments.length;t+=1)for(var s=arguments[t],i=Object.keys(s),a=0;a<i.length;a+=1)e[i[a]]=s[i[a]];return e};adjustments_de={dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesMin:["So","Mo","Di","Mi","Do","Fr","Sa"],monthNames:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesMin:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],years:[]};var isTouchSupported=function(){var e=window.navigator.msMaxTouchPoints,t="ontouchstart"in document.createElement("div");return!(!e&&!t)},check_webp_feature=function(e,t){var s={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"},i=new Image;i.onload=function(){var e=i.width>0&&i.height>0;t(e)},i.onerror=function(){t(!1)},i.src="data:image/webp;base64,"+s[e]},shop={fields:{form_firma:"",form_anrede:"",form_vorname:"",form_name:"",form_strasse:"",form_nr:"",form_zusatzzeile:"",form_plz:"",form_ort:"",form_land:"",form_email:"",form_telefon:""},items:[],fillbasket:function(){if(console.log("ifill"),shop.list=document.getElementById("palma_shop"),shop.items.length>0){for(var e=0;e<shop.items.length;e++)for(var t=0;t<shop.list.children.length;t++)0==t?shop.items[e].Artikel.indexOf("Terminanfrage")!=-1&&(shop.list.children[t].children[0].classList.remove("form_check_white"),shop.list.children[t].children[0].classList.add("form_check_blue"),shop.list.children[t].children[1].children[1].value=shop.items[e].Artikel.replace("Terminanfrage für ","")):shop.items[e].Artikel==shop.list.children[t].children[1].innerHTML&&(shop.list.children[t].children[0].classList.remove("form_check_white"),shop.list.children[t].children[0].classList.add("form_check_blue"),shop.list.children[t].children[3].value=shop.items[e].Menge);shop.display()}},valid:!1,preSendData:function(){shop.valid&&(console.log(shop.items,shop.order_total.replace("Meine Bestellung: ","").replace("Versandkosten: ","").replace("Summe: ",""),"order_sum: "+shop.order_sum),loadXMLDoc(mergeObjects(shop.fields,{order_text:shop.order_total.replace("Meine Bestellung: ","").replace("Versandkosten: ","").replace("Summe: ",""),order_sum:shop.order_sum})))},work:function(e){if(e.classList.contains("form_check_white"))e.classList.remove("form_check_white"),e.classList.add("form_check_blue"),""==e.nextSibling.nextSibling.nextSibling.value&&(e.nextSibling.nextSibling.nextSibling.value=1),shop.items.push({Artikel:e.nextSibling.innerHTML,Preis:e.nextSibling.nextSibling.id.slice(2),Menge:e.nextSibling.nextSibling.nextSibling.value}),console.log(shop.items);else{e.classList.remove("form_check_blue"),e.classList.add("form_check_white"),e.nextSibling.nextSibling.nextSibling.value="";for(var t=0;t<shop.items.length;t++)if(shop.items[t].Artikel==e.nextSibling.innerHTML){shop.items.splice(t,1);break}}shop.display()},remote_add:function(e){for(var t=!1,s=0;s<shop.items.length;s++)if(shop.items[s].Artikel==folders[chapter].data[folders[chapter].last_position].name){t=!0;break}t||shop.items.push({Artikel:folders[chapter].data[folders[chapter].last_position].name,Preis:folders[chapter].data[folders[chapter].last_position].epilog.Bestellung[2],Menge:1}),search_nostyle(e)},user:function(e){if(e.value.indexOf("<")!=-1||e.value.indexOf(">")!=-1||e.value.indexOf("'")!=-1||e.value.indexOf('"')!=-1||e.value.indexOf("(")!=-1||e.value.indexOf(")")!=-1||e.value.indexOf("{")!=-1||e.value.indexOf("}")!=-1||e.value.indexOf("eval")!=-1)return console.log("code!"),shop.fields[e.id]=e.value="",void(shop.valid=!1);switch(e.id){case"form_email":" "==e.value||e.value.indexOf("@")==-1||e.value.indexOf(".")==-1||e.value.length<6||e.value.lastIndexOf(".")+3>e.value.length||e.value.lastIndexOf(".")<e.value.indexOf("@")?(console.log("uncomplete"),shop.fields[e.id]=""):shop.fields[e.id]=e.value;break;case"form_vorname":case"form_name":case"form_strasse":case"form_ort":" "==e.value||e.value.length<2?(console.log("uncomplete"),shop.fields[e.id]=""):shop.fields[e.id]=e.value;break;case"form_plz":isNaN(e.value)||e.value.length<4?(console.log("uncomplete plz"),shop.fields[e.id]=""):shop.fields[e.id]=e.value;break;default:shop.fields[e.id]=e.value}shop.check_send_but()},check_send_but:function(){""!=shop.fields.form_email&&""!=shop.fields.form_vorname&&""!=shop.fields.form_name&&""!=shop.fields.form_strasse&&""!=shop.fields.form_nr&&""!=shop.fields.form_plz&&""!=shop.fields.form_ort?(shop.send_but.style.cursor="pointer",shop.send_but.style.opacity=1,shop.valid=!0):(shop.send_but.style.cursor="default",shop.send_but.style.opacity=.2,shop.valid=!1)},time:function(e){if(""==e.value){for(var t=0;t<shop.items.length;t++)if(shop.items[t].Artikel.indexOf("Terminanfrage")!=-1){shop.items.splice(t,1);break}return void shop.display()}if(0==shop.items.length)shop.items.push({Artikel:"Terminanfrage für "+e.value,Preis:"x",Menge:"x"});else{for(var s=!1,t=0;t<shop.items.length;t++)if(shop.items[t].Artikel.indexOf("Terminanfrage")!=-1){shop.items[t].Artikel="Terminanfrage für "+e.value,s=!0;break}s||shop.items.push({Artikel:"Terminanfrage für "+e.value,Preis:"x",Menge:"x"})}shop.display()},calc:function(e){if(e.value>20&&(e.value=20),e.value<1||""==e.value){e.previousSibling.previousSibling.previousSibling.classList.remove("form_check_blue"),e.previousSibling.previousSibling.previousSibling.classList.add("form_check_white"),e.value="";for(var t=0;t<shop.items.length;t++)if(shop.items[t].Artikel==e.previousSibling.previousSibling.innerHTML){shop.items.splice(t,1);break}return void shop.display()}if(e.previousSibling.previousSibling.previousSibling.classList.contains("form_check_white")&&(e.previousSibling.previousSibling.previousSibling.classList.remove("form_check_white"),e.previousSibling.previousSibling.previousSibling.classList.add("form_check_blue")),0==shop.items.length)shop.items.push({Artikel:e.previousSibling.previousSibling.innerHTML,Preis:e.previousSibling.id.slice(2),Menge:e.value});else for(var t=0;t<shop.items.length;t++){if(shop.items[t].Artikel==e.previousSibling.previousSibling.innerHTML){shop.items[t].Menge=e.value;break}t==shop.items.length-1&&shop.items.push({Artikel:e.previousSibling.previousSibling.innerHTML,Preis:e.previousSibling.id.slice(2),Menge:e.value})}shop.display()},order_div:"",order_sum:0,order_total:"",display:function(e){if(0==shop.items.length)shop.order_total="",shop.list.classList.contains("palma_shop_open")&&(shop.list.classList.remove("palma_shop_open"),shop.list.classList.add("palma_shop_close"),shop.form.classList.remove("palma_form_open"),shop.form.classList.add("palma_form_close"),shop.list.previousSibling.previousSibling.style.width="auto");else{(shop.list.classList.contains("palma_shop_ini")||shop.list.classList.contains("palma_shop_close"))&&(shop.list.classList.remove("palma_shop_close"),shop.list.classList.remove("palma_shop_ini"),shop.list.classList.add("palma_shop_open"),shop.form.classList.remove("palma_form_close"),shop.form.classList.add("palma_form_open"),shop.list.previousSibling.previousSibling.style.width="50%"),shop.order_total="Ihre Bestellung: <br/>",shop.order_sum=0;for(var t=0;t<shop.items.length;t++)"x"!=shop.items[t].Menge?(shop.order_sum+=parseInt(shop.items[t].Menge*shop.items[t].Preis),shop.order_total+=shop.items[t].Menge+" x "+shop.items[t].Artikel+" à CHF "+shop.items[t].Preis+".00<br/>"):shop.order_total+=shop.items[t].Artikel+"<br/>";shop.order_total+=shop.order_sum>0?"Versandkosten: CHF 8.00<br/><hr/>":"<br/><hr/>",shop.order_total+=shop.order_sum>0?"Summe: CHF "+parseInt(shop.order_sum+8)+".00<br/><hr/>":"<br/><hr/>"}if(shop.order_div.innerHTML=shop.order_total,e){shop.items=[];for(var s=0;s<shop.list.children.length;s++)0==s?(shop.list.children[s].children[0].classList.remove("form_check_blue"),shop.list.children[s].children[0].classList.add("form_check_white"),shop.list.children[s].children[1].children[1].value=""):(shop.list.children[s].children[0].classList.remove("form_check_blue"),shop.list.children[s].children[0].classList.add("form_check_white"),shop.list.children[s].children[3].value="");shop.order_div.innerHTML+="... wurde registriert und eine Bestätigungs E-Mail an "+shop.fields.form_email+' versendet. <input onclick="shop.display()" style="background:rgba(141, 170, 212, 1);width: 120px;display: inline-block;cursor:pointer;" type="button" value="Ok" />',shop.inner_fields.style.display="none"}else shop.items.length>0&&(shop.inner_fields.style.display="block")}},loadForm=function(){if(console.log("loadForm",shop.items),document.getElementById("palma_form")||console.log("!document.getElementById(palma_form)"),shop.form=document.getElementById("palma_form"),""!=shop.form.innerHTML)return console.log("shop.form.innerHTML != empty ireturn"),shop.check_send_but(),void shop.fillbasket();var e='<form><div id="order_sum"></div><textarea onchange="sh_dat.title_proc(this)" class="proj_title" rows="4" placeholder="Kurzbeschrieb"></textarea><span style="margin: 0;width:180px;display: none;"><input class="proj_vis_underlay" placeholder="PDF Datei" type="text"/><input onchange="sh_dat.file_proc(this)" class="proj_file" type="file"accept=".pdf, application/pdf"/></span><div id="inner_fields"><span><label>Firma</label><input type="text" id="form_firma" name="form_firma"></span><span><label>Anrede</label><select id="form_anrede" name="form_anrede"><option></option><option value="Frau">Frau</option><option value="Herr">Herr</option></select></span><span><label>Vorname</label><input type="text" id="form_vorname" name="form_vorname" class="cap" required></span><span><label>Name</label><input type="text" id="form_name" name="form_name" class="cap" required></span><span class="large prefield"><label>Strasse</label><input type="text" id="form_strasse" name="form_strasse" class="cap" required></span><span class="small"><label>Nr.</label><input type="text" id="form_nr" name="form_nr" required></span><span><label>Zusatzzeile</label><input type="text" id="form_zusatzzeile" name="form_zusatzzeile"></span><span class="small prefield"><label>PLZ</label><input type="text" id="form_plz" name="form_plz" required></span><span class="large"><label>Ort</label><input type="text" id="form_ort" name="form_ort" class="cap" required></span><span><label>Land</label><input type="text" id="form_land" name="form_land" class="cap"></span><span><label>Email</label><input type="email" id="form_email" name="form_email" required></span><span><label>Telefon</label><input type="text" id="form_telefon" name="form_telefon"></span><br></div></form>';shop.form.innerHTML=e,shop.order_div=document.getElementById("order_sum"),shop.send_but=shop.form.parentNode.nextSibling.children[2],shop.inner_fields=document.getElementById("inner_fields"),console.log(shop.form.children[0].elements.length);for(var t=0;t<shop.form.children[0].elements.length-1;t++)shop.form.children[0].elements[t].className.indexOf("proj")==-1&&(shop.form.children[0].elements[t].value=shop.fields[shop.form.children[0].elements[t].id],shop.form.children[0].elements[t].addEventListener("keyup",function(){shop.user(this)},!1));shop.check_send_but(),shop.fillbasket()},map,loadMap=function(){if(document.getElementById("map_script"))return map=null,void initMap();var e=document.createElement("script");e.id="map_script",e.type="text/javascript",e.src="http://maps.google.com/maps/api/js?key=AIzaSyCi0JgwWx4peuLZN6b0Ng2xmW825wMj6tc&callback=initMap",document.body.appendChild(e)},initMap=function(){map=new google.maps.Map(document.getElementById("palma_map"),{center:{lat:46.9583839,lng:7.4461065},mapTypeId:"terrain",scrollwheel:!1,zoom:16})},centro_mv={element:!1,entrys:["museum"],entrys_txt:{museum:["1. Casa Anatta: Eingang","6. Die anarchistische Kolonie"]},controls:function(e,t){this.status=t,this.element=e.parentNode.previousSibling,do_cords(t),this.entrys.indexOf(this.status)==-1&&(e.parentNode.previousSibling.src="mediaguides/monteverita/"+this.status+".png")},cont:function(e){var t=[0,0,document.getElementById("centro-buttons").children[0].offsetWidth,document.getElementById("centro-buttons").children[0].offsetHeight];switch(e){case"home":this[e]={shape:"circle",coords:[.29*t[2]+","+.28*t[3]+","+.1*t[3],t[2]-.29*t[2]+","+.28*t[3]+","+.1*t[3],.5*t[2]+","+.5*t[3]+","+.14*t[3],.29*t[2]+","+(t[3]-.28*t[3])+","+.1*t[3],t[2]-.29*t[2]+","+(t[3]-.28*t[3])+","+.1*t[3]],ih:["centro_mv.controls(this,'center')","centro_mv.controls(this,'history')","centro_mv.controls(this,'guided')","centro_mv.controls(this,'perso')","centro_mv.controls(this,'guestbook')"]};break;case"center":this[e]={shape:"circle",coords:[.15*t[2]+","+.15*t[3]+","+.05*t[3],.29*t[2]+","+.28*t[3]+","+.1*t[3],t[2]-.29*t[2]+","+.28*t[3]+","+.1*t[3],.29*t[2]+","+(t[3]-.28*t[3])+","+.1*t[3],t[2]-.29*t[2]+","+(t[3]-.28*t[3])+","+.1*t[3]],ih:["centro_mv.controls(this,'home')","do_me(app_display_data[app_display_data.act_app].img_ix[2])","do_me(app_display_data[app_display_data.act_app].img_ix[3])","do_me(app_display_data[app_display_data.act_app].img_ix[4])","do_me(app_display_data[app_display_data.act_app].img_ix[5])"]};break;case"history":this[e]={shape:"rect",coords:[.06*t[2]+","+.12*t[3]+","+.25*t[2]+","+.17*t[3],.09*t[2]+","+.2*t[3]+","+.48*t[2]+","+.48*t[3],.52*t[2]+","+.2*t[3]+","+(t[2]-.09*t[2])+","+.48*t[3],.06*t[2]+","+.82*t[3]+","+.25*t[2]+","+.88*t[3]],ih:["centro_mv.controls(this,'home')","centro_mv.controls(this,'guided')","centro_mv.controls(this,'epoches')","centro_mv.controls(this,'home')"]};break;case"guided":this[e]={shape:"rect",coords:[.06*t[2]+","+.12*t[3]+","+.25*t[2]+","+.17*t[3],.09*t[2]+","+.2*t[3]+","+.48*t[2]+","+.48*t[3],.52*t[2]+","+.2*t[3]+","+(t[2]-.09*t[2])+","+.48*t[3],.09*t[2]+","+.5*t[3]+","+.48*t[2]+","+.78*t[3],.52*t[2]+","+.5*t[3]+","+(t[2]-.09*t[2])+","+.78*t[3],.06*t[2]+","+.82*t[3]+","+.25*t[2]+","+.88*t[3]],ih:["centro_mv.controls(this,'home')","centro_mv.controls(this,'museum')","centro_mv.controls(this,'parc')","centro_mv.controls(this,'environs')","centro_mv.controls(this,'szeemann')","centro_mv.controls(this,'home')"]};break;case"perso":this[e]={shape:"circle",coords:[.15*t[2]+","+.15*t[3]+","+.05*t[3],.5*t[2]+","+.75*t[3]+","+.16*t[3]],ih:["centro_mv.controls(this,'home')","centro_mv.controls(this,'home')"]};break;case"guestbook":this[e]={shape:"circle",coords:[t[2]-.1*t[2]+","+.1*t[3]+","+.1*t[3]],ih:["centro_mv.controls(this,'home')"]};break;case"parc":this[e]={shape:"circle",coords:[.15*t[2]+","+.15*t[3]+","+.05*t[3],.84*t[2]+","+.31*t[3]+","+.04*t[3],.15*t[2]+","+.85*t[3]+","+.05*t[3]],ih:["centro_mv.controls(this,'guided')","do_me(app_display_data[app_display_data.act_app].img_ix[6], 'monteverita_3')","centro_mv.controls(this,'home')"]};break;case"epoches":this[e]={shape:"rect",coords:[.06*t[2]+","+.12*t[3]+","+.25*t[2]+","+.17*t[3],.06*t[2]+","+.82*t[3]+","+.25*t[2]+","+.88*t[3]],ih:["centro_mv.controls(this,'history')","centro_mv.controls(this,'home')"]};break;case"museum":this[e]={shape:"rect",coords:[.06*t[2]+","+.12*t[3]+","+.25*t[2]+","+.17*t[3],.06*t[2]+","+.2*t[3]+","+(t[2]-.06*t[2])+","+.25*t[3],.06*t[2]+","+.26*t[3]+","+(t[2]-.06*t[2])+","+.33*t[3]],ih:["centro_mv.controls(this,'guided')","do_me(app_display_data[app_display_data.act_app].img_ix[0], 'monteverita_1')","do_me(app_display_data[app_display_data.act_app].img_ix[1], 'monteverita_2')"]};var s=document.createElement("img");s.src="mediaguides/monteverita/museum.png",s.onload=function(){centro_mv.element.src=draw_centro_mv_img(centro_mv.entrys_txt[centro_mv.status],this)}}},status:"home"},app_display_data={act_app:"",maxfrisch:{img_ix:[1,4,8,12,14,18,21,27,31,35,39,41,45],plc_tx:["Rosenhof, Brunnen","Bodega Española","Hotel Storchen","Kirche St. Peter","Elfuhrgeläute auf der Münsterbrücke","Café Terrasse","Café Odeon","Kronenhalle","Stadelhofer Passage, letzte Wohnung von Max Frisch","Schauspielhaus Zürich","Kantonales Realgymnasium","Universität Zürich","ETH Zürich"],apendix:function(){return'<p>Wählen sie einen Spaziergang.</p><p><img class="artwork" src="mediaguides/'+app_display_data.act_app+'/app_artwork.jpg" alt="App Artwork" height="175" width="175"></p><p>Die  App bietet Ihnen:</p><ul><li>drei Stadtspaziergänge durch verschiedene Quartiere der Stadt Zürich</li><li>21 Audiostationen mit  Informationen über Leben und Werk von Max Frisch</li><li>rund 40 Minuten Audioführung</li><li>rund 68 Abbildungen</li><li>GPS-Lokalisierung Ihres Standortes</li><li>kostenlosen Download</li></ul><p>Erhältlich im App Store für iPhones und Google Play Store:</p><p><a href="https://itunes.apple.com/de/app/id573495442?mt=8" target="_blank"><img src="mediaguides/apples-app-store.png" alt="Zum download im App Store" height="70" width="70"></a> <a href="https://play.google.com/store/apps/details?id=com.tatentraeger.maxfrischapp" target="_blank"><img src="mediaguides/google_play.png" alt="Zum download im Google Play Store" height="70" width="217"></a></p>'}},monteverita:{img_ix:[1,3,4,15,9,18,13],apendix:function(){return'<p>Wählen sie ein Thema aus der App.</p><p><img class="artwork" src="mediaguides/'+app_display_data.act_app+'/app_artwork.jpg" alt="App Artwork" height="175" width="175"></p><p>Die  App bietet Ihnen:</p><ul><li>Audioguide mit historischen Fotografien</li><li>Videoguide von Harald Szeemann und zu Labans Ikosaeder</li><li>Geschichte, Epochen und Persönlichkeiten des Monte Verità</li><li>Der Monte Verità heute</li><li>Gästebuch</li><li>Persönlichkeitstest: Was für ein Monteveritaner sind Sie?</li><li>Sprachen: Deutsch, Italienisch, Französisch, Englisch</li></ul><p>Erhältlich im App Store für iPhones und Google Play Store:</p><p><a href="https://itunes.apple.com/ch/app/mediaguide-monte-verita/id975156405?l=de&mt=8" target="_blank"><img src="mediaguides/apples-app-store.png" alt="Zum download im App Store" height="70" width="70"></a> <a href="https://play.google.com/store/apps/details?id=org.webatelier.monteverita" target="_blank"><img src="mediaguides/google_play.png" alt="Zum download im Google Play Store" height="70" width="217"></a></p>'}}},do_cords=function(e){if(document.getElementById("app_centro")){var t=document.getElementById("app_centro");setTimeout(function(){"undefined"==typeof e?(centro_mv.status="home",centro_mv.cont("home")):centro_mv.cont(e),t.innerHTML="";for(var s=0;s<centro_mv[centro_mv.status].ih.length;s++)t.innerHTML+='<area shape="'+centro_mv[centro_mv.status].shape+'" onclick="'+centro_mv[centro_mv.status].ih[s]+'" onmouseover="this.style.cursor = \'pointer\'" onmouseout="this.style.cursor = \'default\'">';for(var s=0;s<centro_mv[centro_mv.status].ih.length;s++)t.children[s].coords=centro_mv[centro_mv.status].coords[s]},500)}},display_prel,preload_rest=function(e){for(var t=0;t<folders[chapter].data.length;t++)if(folders[chapter].data[t].bilder.length>2)for(var s=2;s<folders[chapter].data[t].bilder.length;s++){var i=new Image;i.src=img_type.path+e+"/"+folders[chapter].data[t].comp_name+"_"+s+img_type.ext}},preload_images={gia_calls:0,get_arrays:function(e,t,s){var i=Array.isArray(t)?t[preload_images.gia_calls][s]:t[s];loadXMLDoc("scripts/inhalte.php?ordner=../images/"+i+"/&zuza"+Math.floor(1e3*Math.random()+1),function(){if(4==xmlhttp.readyState)if(200==xmlhttp.status){preload_images.txt=xmlhttp.responseText,preload_images.temp=preload_images.txt.split(" ");var i=[];for(a in preload_images.temp)if(Array.isArray(t)){if(preload_images.temp[a].indexOf(".jpg")!=-1&&preload_images.temp[a].indexOf("_")==-1&&i.push(preload_images.temp[a]),preload_images.temp[a].indexOf(".mp4")!=-1){var r=preload_images.temp[a].replace(".mp4",""),o=folders[preload_images.gia_calls].data.map(function(e){return e.comp_name}).indexOf(r);folders[preload_images.gia_calls].data[o].epilog.Film=r}if(preload_images.temp[a].indexOf(".mp3")!=-1){var r=preload_images.temp[a].replace(".mp3",""),o=folders[preload_images.gia_calls].data.map(function(e){return e.comp_name}).indexOf(r);folders[preload_images.gia_calls].data[o].epilog.Hören=r}}else preload_images.temp[a].indexOf(".jpg")!=-1&&preload_images.temp[a].indexOf("_")!=-1&&i.push(preload_images.temp[a]);if(Array.isArray(t))for(var n=0;n<i.length;n++){preload_images.add_imp_button(i[n].replace(".jpg",""));var l=new Image;n==i.length-1&&(l.onload=function(){if(preload_images.gia_calls<t.length-1)preload_images.gia_calls++,preload_images.get_arrays(e,t,s);else{preload_images.gia_calls=0;var i=decodeURI(window.location.search.substring(1));if(i.length>0&&" "!=i){var a=search_nostyle(i);1==a.length?hit_menue(0):0==a[1]?(console.log("alt hit menue"),hit_menue(0),setTimeout(function(){jump_to(a[0],a[1])},400)):jump_to(a[0],a[1])}else hit_menue(0);for(var r="",o=0;o<display_prel.children.length;o++)display_prel.children[o].alt||(display_prel.children[o].alt=display_prel.children[o].title+" palma3",r+=display_prel.children[o].title+" ");var n=document.createElement("meta");n.name="keywords",n.content="botsi code palma3 bern "+r,document.head.appendChild(n)}}),l.src=img_type.path+t[preload_images.gia_calls][s]+"/"+(".jpg"==img_type.ext?i[n]:i[n].replace(".jpg",img_type.ext)),"default.jpg"!=i[n]&&(display_prel.innerHTML+='<img src="'+l.src+'" title="'+i[n].replace(".jpg","")+'" />')}else{for(var n=0;n<i.length;n++){var r=i[n].replace(".jpg","").split("_"),o=folders[chapter].data.map(function(e){return e.comp_name}).indexOf(r[0]);folders[chapter].data[o].bilder.push(r[1])}for(var n=0;n<folders[chapter].data.length;n++){var p=folders[chapter].data[n].bilder;if(p.length>0){var l=new Image;1==p.length&&n==folders[chapter].data.length-1&&(l.onload=function(){preload_images.folder_imgs=!0}),l.src=img_type.path+t[s]+"/"+folders[chapter].data[n].comp_name+"_1"+img_type.ext,display_prel.innerHTML+='<img src="'+l.src+'" />'}if(p.length>1){var l=new Image;n==folders[chapter].data.length-1&&(l.onload=function(){preload_images.folder_imgs=!0}),l.src=img_type.path+t[s]+"/"+folders[chapter].data[n].comp_name+"_"+p.length+img_type.ext,display_prel.innerHTML+='<img src="'+l.src+'" />'}0==p.length&&n==folders[chapter].data.length-1&&(preload_images.folder_imgs=!0)}setTimeout(function(){preload_rest(t[s])},100)}}else console.log("get_images_array shit happens")})},add_imp_button:function(e){var t=folders[preload_images.gia_calls].data.map(function(e){return e.comp_name}).indexOf(e);t!=-1&&"undefined"!=typeof folders[preload_images.gia_calls].data[t].epilog&&(folders[preload_images.gia_calls].data[t].epilog.Impressionen=preload_images.txt.indexOf(e+"_")!=-1?1:0)}},getNearestNumber=function(e,t){if((s=e.length)<2)return s-1;for(var s,i=Math.abs(e[--s]-t);s--&&!(i<(i=Math.abs(e[s]-t))););return s+1},get_page_scroll_position=function(){var e;return e=document.body.scrollTop?document.body.scrollTop:document.documentElement.scrollTop},toggleFullScreen=function(){vid.requestFullscreen?vid.requestFullscreen():vid.mozRequestFullScreen?vid.mozRequestFullScreen():vid.webkitRequestFullscreen&&vid.webkitRequestFullscreen()},disable_cine=!0,resizeId,start_cine=function(){var e=document.getElementById("hg_cover");window.addEventListener("touchstart",function(){0==disable_cine&&get_mouse_coords(e)},!1),window.addEventListener("touchmove",function(){0==disable_cine&&check_swipe(e)},!1),window.addEventListener("touchend",function(){0==disable_cine&&swap_now(e)},!1)},get_cine_script=function(){loadXMLDoc("js/cinema.js",function(){if(4==xmlhttp.readyState)if(200==xmlhttp.status){var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("charset","utf-8"),e.innerHTML=xmlhttp.responseText,e.onload=function(){start_cine(),preload_images.get_arrays("kind",folders,"name")},e.src="js/cinema.js",document.getElementsByTagName("head")[0].appendChild(e)}else console.log("get_cine_script shit happens")})},align_onresize=function(){var e=document.getElementById("chapter_menu");e&&"block"==e.style.display&&(e.style.display="none"),clearTimeout(resizeId),resizeId=setTimeout(function(){for(var e=document.getElementsByClassName("tx"),t=0;t<e.length;t++)e[t].style.WebkitColumnCount=e[t].style.MozColumnCount=e[t].style.columnCount=get_column_count(folders[chapter].data[t]).replace("column-count:","");if(jump_to(folders[chapter].last_position,chapter),""!=vid&&size_video(),document.getElementsByClassName("cheese").length>0)for(var s=document.getElementsByClassName("ueandtx"),i=0;i<s.length;i++)if(s[i].getElementsByClassName("cheese")[0]){var a=window.innerWidth-260,r=calc_min_slid_height(s[i].getElementsByClassName("epilog")[0].children.length),o=s[i].getElementsByClassName("cheese")[0];o.width=a,o.height=r,draw_cheese_canvas(o,a,r)}},200),do_cords(centro_mv.status)},getchildindex=function(e){for(var t=0;null!=(e=e.previousSibling);)t++;return t},calc_min_slid_height=function(e){var t=26*e+108;return t>=(window.innerHeight-300)/2+24?t:(window.innerHeight-300)/2+24},page_reload=function(){window.location.href=wlh},select_pdf={act_log:function(e){var t=e.comp_name;return e.epilog.Dossier.indexOf("Einleitung")!=-1&&(t+="_e"),e.epilog.Dossier.indexOf("Orte und Daten")!=-1&&(t+="_o"),e.epilog.Dossier.indexOf("Ausstellungskonzept")!=-1&&(t+="_a"),e.epilog.Dossier.indexOf("Impressum")!=-1&&(t+="_i"),t},log:[],get_scr:function(){if(!pdf_m){var e=document.createElement("script");e.onload=function(){var e=document.createElement("script");e.onload=function(){var e=document.createElement("script");e.src="images/pdf_head_base64.js",e.charset="utf-8",document.head.appendChild(e)},e.src="scripts/pdfmake/vfs_fonts.js",e.charset="utf-8",document.head.appendChild(e)},e.src="scripts/pdfmake/pdfmake.min.js",e.charset="utf-8",document.head.appendChild(e),pdf_m=!0}},addorremove:function(e,t){e.classList.contains("form_check_white")?(e.classList.remove("form_check_white"),e.classList.add("form_check_blue"),e.nextSibling.style.visibility="visible",folders[chapter].data[folders[chapter].last_position].epilog.Dossier.indexOf(t)==-1&&folders[chapter].data[folders[chapter].last_position].epilog.Dossier.push(t)):(e.classList.remove("form_check_blue"),e.classList.add("form_check_white"),e.nextSibling.style.visibility="hidden",folders[chapter].data[folders[chapter].last_position].epilog.Dossier.indexOf(t)!=-1&&folders[chapter].data[folders[chapter].last_position].epilog.Dossier.splice(folders[chapter].data[folders[chapter].last_position].epilog.Dossier.indexOf(t),1)),e.parentNode.parentNode.lastChild.getElementsByClassName("alert_line")[0].style.visibility=select_pdf.log.indexOf(select_pdf.act_log(folders[chapter].data[folders[chapter].last_position]))==-1?"hidden":"visible",e.parentNode.parentNode.lastChild.style.opacity=0==folders[chapter].data[folders[chapter].last_position].epilog.Dossier.length?.2:1,e.parentNode.parentNode.lastChild.children[0].style.cursor=0==folders[chapter].data[folders[chapter].last_position].epilog.Dossier.length?"default":"pointer"},collect:function(){folders[chapter].data[folders[chapter].last_position].epilog.Dossier.length>0&&download_pdf()},cleanup:function(e,t,s){var i=document.createElement("div");if(i.innerHTML=e,Array.isArray(s))return function(){return i.innerHTML.replace(/<\/strong>/g,"\n").replace(/<strong>/g,"\n\n").replace(/<\/p>/g,"\n").split("<p>")}();for(var a=i.getElementsByTagName(t);a.length;){for(var r=a[0].parentNode;a[0].firstChild;)r.insertBefore(a[0].firstChild,a[0]);r.removeChild(a[0])}return"a"==t&&i.innerHTML.indexOf(" &amp; ")!=-1&&(i.innerHTML=i.innerHTML.replace(" &amp; "," and ")),i.innerHTML}},base64,download_pdf=function(){var e=folders[chapter].data[folders[chapter].last_position],t=[{image:base64,width:520},{text:"\n",style:"header"},{text:e.name+" - "+adjustments_de.monthNames[e.time.from[1]-1]+" "+e.time.from[2],style:"header"},{text:"\n",style:"header"}];if(e.epilog.Dossier.indexOf("Einleitung")!=-1){t.push({text:"\n",style:"header"},{text:"  Einleitung  \n",style:"header_blue"},{text:"\n",style:"header"},{text:e.prolog.replace(/<br>/g,"\n\n").replace(/<br\/>/g,"\n\n")+"\n",style:"header"},{text:"\n",style:"header"});var s=e.text;if(s.indexOf("</a>")!=-1){var i=document.createElement("div");i.innerHTML=s;for(var a=i.getElementsByTagName("a");a.length;){for(var r=a[0].parentNode;a[0].firstChild;)r.insertBefore(a[0].firstChild,a[0]);r.removeChild(a[0])}s=i.innerHTML}t.push({text:s.replace(/<br>/g,"\n").replace(/<br\/>/g,"\n")+"\n"}),e.epilog.Dossier.indexOf("Orte und Daten")==-1&&e.epilog.Dossier.indexOf("Impressum")==-1&&e.epilog.Dossier.indexOf("Ausstellungskonzept")==-1||t.push({text:"",pageBreak:"after"})}if(e.epilog.Dossier.indexOf("Ausstellungskonzept")!=-1){t.push({text:"\n",style:"header"},{text:"  Ausstellungskonzept  \n",style:"header_blue"},{text:"\n",style:"header"});var o=document.createElement("div");o.innerHTML=e.epilog.Ausstellungskonzept;for(var n=0;n<o.children.length;n++)if("h2"==o.children[n].tagName.toLowerCase())t.push({text:"\n",style:"header"}),t.push({text:o.children[n].innerHTML.replace(/<br>/g,"\n\n").replace(/<br\/>/g,"\n\n"),style:"header"});else{t.push({text:"\n\n"});var l=o.children[n].innerHTML;if(l=function(){return select_pdf.cleanup(l,"a")}(),l=function(){return select_pdf.cleanup(l,"li")}(),l.indexOf("</p>")!=-1){l=function(){return select_pdf.cleanup(l,"p",[])}();for(var p=0;p<l.length;p++)t.push({text:l[p]})}else t.push({text:l.replace(/<br>/g,"\n").replace(/<br\/>/g,"\n")});t.push({text:"\n"})}e.epilog.Dossier.indexOf("Orte und Daten")==-1&&e.epilog.Dossier.indexOf("Impressum")==-1||t.push({text:"",pageBreak:"after"})}if(e.epilog.Dossier.indexOf("Impressum")!=-1){t.push({text:"\n",style:"header"},{text:"  Impressum  \n",style:"header_blue"},{text:"\n",style:"header"});for(var d in e.epilog.Impressum){var c=e.epilog.Impressum[d][0].replace(/,/g,"");if(e.epilog.Impressum[d].length>1)for(var m=1;m<e.epilog.Impressum[d].length;m++)c+=", "+e.epilog.Impressum[d][m].replace(/,/g,"");c.indexOf("</a>")!=-1&&(c=select_pdf.cleanup(c,"a")),t.push({text:"\n",style:"header"},{text:d+"\n",style:"header"},{text:"\n",style:"header"}),t.push({text:c+"\n"}),t.push({text:"\n"})}e.epilog.Dossier.indexOf("Orte und Daten")!=-1&&t.push({text:"",pageBreak:"after"})}if(e.epilog.Dossier.indexOf("Orte und Daten")!=-1){t.push({text:"\n",style:"header"},{text:"  Orte und Daten  \n",style:"header_blue"},{text:"\n",style:"header"});var o=document.createElement("div");o.innerHTML=e.epilog.Ausstellungsort;for(var h=o.getElementsByTagName("span"),u="xyz",g=0;g<h.length;g++){h[g].getElementsByTagName("p")[0].innerHTML!=u&&t.push({text:"\n",style:"header"},{text:h[g].getElementsByTagName("p")[0].innerHTML+"\n",style:"header"},{text:"\n"}),u=h[g].getElementsByTagName("p")[0].innerHTML;var _=h[g].getElementsByTagName("p")[1].innerHTML+"\n"+h[g].getElementsByTagName("p")[2].innerHTML+"\n"+h[g].getElementsByTagName("p")[3].innerHTML;if(t.push({text:_+"\n\n"}),h[g].getElementsByTagName("p").length>5){
var f=h[g].getElementsByTagName("p")[5].innerHTML;t.push({text:f+"\n\n",link:"http://"+f})}t.push({text:"\n"})}}var v={footer:function(t,s){return t==s?{text:"© 2017 | www.palma3.ch",link:"http://www.palma3.ch/new_palma/?"+e.comp_name,margin:[40,-20,0,0]}:""},pageSize:"A4",content:t,styles:{header:{color:"#bc123a",fontSize:20,bold:!0},header_blue:{color:"#fff",background:"#8daad4",margin:[8,0,0,0],fontSize:16}}};select_pdf.log.indexOf(select_pdf.act_log(e))==-1?(select_pdf.log.push(select_pdf.act_log(e)),pdfMake.createPdf(v).download(e.comp_name+".pdf")):document.getElementsByClassName("alert_line")[folders[chapter].last_position].style.visibility="visible"};